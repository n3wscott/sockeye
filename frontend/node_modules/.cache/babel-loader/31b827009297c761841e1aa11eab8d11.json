{"ast":null,"code":"function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport React, { forwardRef, useCallback, useContext, useMemo, useRef, useState, useEffect } from 'react';\nimport { ThemeContext } from 'styled-components';\nimport { defaultProps } from '../../default-props';\nimport { Box } from '../Box';\nimport { Button } from '../Button';\nimport { Heading } from '../Heading';\nimport { Keyboard } from '../Keyboard';\nimport { StyledCalendar, StyledDay, StyledDayContainer, StyledWeek, StyledWeeks, StyledWeeksContainer } from './StyledCalendar';\nimport { addDays, addMonths, betweenDates, daysApart, endOfMonth, startOfMonth, subtractDays, subtractMonths, withinDates } from './utils';\nvar headingPadMap = {\n  small: 'xsmall',\n  medium: 'small',\n  large: 'medium'\n};\n\nvar normalizeReference = function normalizeReference(reference, date, dates) {\n  var normalizedReference;\n\n  if (reference) {\n    normalizedReference = new Date(reference);\n  } else if (date) {\n    normalizedReference = new Date(date);\n  } else if (dates && dates.length > 0) {\n    if (typeof dates[0] === 'string') {\n      normalizedReference = new Date(dates[0]);\n    } else if (Array.isArray(dates[0])) {\n      normalizedReference = new Date(dates[0][0]);\n    } else {\n      normalizedReference = new Date();\n      normalizedReference.setHours(0, 0, 0, 0);\n    }\n  } else {\n    normalizedReference = new Date();\n    normalizedReference.setHours(0, 0, 0, 0);\n  }\n\n  return normalizedReference;\n};\n\nvar buildDisplayBounds = function buildDisplayBounds(reference, firstDayOfWeek) {\n  var start = new Date(reference);\n  start.setDate(1); // first of month\n  // In case Sunday is the first day of the month, and the user asked for Monday\n  // to be the first day of the week, then we need to include Sunday and six\n  // days prior.\n\n  start = start.getDay() === 0 && firstDayOfWeek === 1 ? start = subtractDays(start, 6) : // beginning of week\n  start = subtractDays(start, start.getDay() - firstDayOfWeek);\n  var end = addDays(start, 7 * 5 + 7); // 5 weeks to end of week\n\n  return [start, end];\n};\n\nvar millisecondsPerYear = 31557600000;\n\nvar CalendarDayButton = function CalendarDayButton(props) {\n  return /*#__PURE__*/React.createElement(Button, _extends({\n    tabIndex: -1,\n    plain: true\n  }, props));\n};\n\nvar CalendarDay = function CalendarDay(_ref) {\n  var children = _ref.children,\n      fill = _ref.fill,\n      size = _ref.size,\n      isInRange = _ref.isInRange,\n      isSelected = _ref.isSelected,\n      otherMonth = _ref.otherMonth,\n      _ref$buttonProps = _ref.buttonProps,\n      buttonProps = _ref$buttonProps === void 0 ? {} : _ref$buttonProps;\n  return /*#__PURE__*/React.createElement(StyledDayContainer, {\n    sizeProp: size,\n    fillContainer: fill\n  }, /*#__PURE__*/React.createElement(CalendarDayButton, _extends({\n    fill: fill\n  }, buttonProps), /*#__PURE__*/React.createElement(StyledDay, {\n    inRange: isInRange,\n    otherMonth: otherMonth,\n    isSelected: isSelected,\n    sizeProp: size,\n    fillContainer: fill\n  }, children)));\n};\n\nvar CalendarCustomDay = function CalendarCustomDay(_ref2) {\n  var children = _ref2.children,\n      fill = _ref2.fill,\n      size = _ref2.size,\n      buttonProps = _ref2.buttonProps;\n\n  if (!buttonProps) {\n    return /*#__PURE__*/React.createElement(StyledDayContainer, {\n      sizeProp: size,\n      fillContainer: fill\n    }, children);\n  }\n\n  return /*#__PURE__*/React.createElement(StyledDayContainer, {\n    sizeProp: size,\n    fillContainer: fill\n  }, /*#__PURE__*/React.createElement(CalendarDayButton, _extends({\n    fill: fill\n  }, buttonProps), children));\n};\n\nvar Calendar = /*#__PURE__*/forwardRef(function (_ref3, ref) {\n  var _ref3$animate = _ref3.animate,\n      animate = _ref3$animate === void 0 ? true : _ref3$animate,\n      validBounds = _ref3.bounds,\n      children = _ref3.children,\n      dateProp = _ref3.date,\n      datesProp = _ref3.dates,\n      daysOfWeek = _ref3.daysOfWeek,\n      disabled = _ref3.disabled,\n      fill = _ref3.fill,\n      _ref3$firstDayOfWeek = _ref3.firstDayOfWeek,\n      firstDayOfWeek = _ref3$firstDayOfWeek === void 0 ? 0 : _ref3$firstDayOfWeek,\n      header = _ref3.header,\n      _ref3$locale = _ref3.locale,\n      locale = _ref3$locale === void 0 ? 'en-US' : _ref3$locale,\n      onReference = _ref3.onReference,\n      onSelect = _ref3.onSelect,\n      range = _ref3.range,\n      referenceProp = _ref3.reference,\n      _ref3$showAdjacentDay = _ref3.showAdjacentDays,\n      showAdjacentDays = _ref3$showAdjacentDay === void 0 ? true : _ref3$showAdjacentDay,\n      _ref3$size = _ref3.size,\n      size = _ref3$size === void 0 ? 'medium' : _ref3$size,\n      rest = _objectWithoutPropertiesLoose(_ref3, [\"animate\", \"bounds\", \"children\", \"date\", \"dates\", \"daysOfWeek\", \"disabled\", \"fill\", \"firstDayOfWeek\", \"header\", \"locale\", \"onReference\", \"onSelect\", \"range\", \"reference\", \"showAdjacentDays\", \"size\"]);\n\n  var theme = useContext(ThemeContext) || defaultProps.theme; // set date when caller changes it, allows us to change it internally too\n\n  var _useState = useState(dateProp),\n      date = _useState[0],\n      setDate = _useState[1];\n\n  useEffect(function () {\n    return setDate(dateProp);\n  }, [dateProp]); // set dates when caller changes it, allows us to change it internally too\n\n  var _useState2 = useState(datesProp),\n      dates = _useState2[0],\n      setDates = _useState2[1];\n\n  useEffect(function () {\n    return setDates(datesProp);\n  }, [datesProp]); // set reference based on what the caller passed or date/dates.\n\n  var _useState3 = useState(normalizeReference(referenceProp, date, dates)),\n      reference = _useState3[0],\n      setReference = _useState3[1];\n\n  useEffect(function () {\n    return setReference(normalizeReference(referenceProp, dateProp, datesProp));\n  }, [dateProp, datesProp, referenceProp]); // calculate the bounds we display based on the reference\n\n  var _useState4 = useState(buildDisplayBounds(reference, firstDayOfWeek)),\n      displayBounds = _useState4[0],\n      setDisplayBounds = _useState4[1];\n\n  var _useState5 = useState(),\n      targetDisplayBounds = _useState5[0],\n      setTargetDisplayBounds = _useState5[1];\n\n  var _useState6 = useState(),\n      slide = _useState6[0],\n      setSlide = _useState6[1];\n\n  var _useState7 = useState(),\n      animating = _useState7[0],\n      setAnimating = _useState7[1]; // When the reference changes, we need to update the displayBounds.\n  // This is easy when we aren't animating. If we are animating,\n  // we temporarily increase the displayBounds to be the union of the old\n  // and new ones and set slide to drive the animation. We keep track\n  // of where we are heading via targetDisplayBounds. When the animation\n  // finishes, we prune displayBounds down to where we are headed and\n  // clear the slide and targetDisplayBounds.\n\n\n  useEffect(function () {\n    var nextDisplayBounds = buildDisplayBounds(reference, firstDayOfWeek); // Checks if the difference between the current and next DisplayBounds is\n    // greater than a year. If that's the case, calendar should update without\n    // animation.\n\n    var diffBoundsAboveYearFlag = false;\n    var sameDisplayBounds = false;\n\n    if (nextDisplayBounds[0].getTime() < displayBounds[0].getTime()) {\n      if (displayBounds[0].getTime() - nextDisplayBounds[0].getTime() > millisecondsPerYear) {\n        diffBoundsAboveYearFlag = true;\n      }\n    } else if (nextDisplayBounds[1].getTime() > displayBounds[1].getTime()) {\n      if (nextDisplayBounds[1].getTime() - displayBounds[1].getTime() > millisecondsPerYear) {\n        diffBoundsAboveYearFlag = true;\n      }\n    } else if (nextDisplayBounds[0].getTime() === displayBounds[0].getTime() && nextDisplayBounds[1].getTime() === displayBounds[1].getTime()) {\n      sameDisplayBounds = true;\n    }\n\n    if (!animate || diffBoundsAboveYearFlag || sameDisplayBounds) {\n      setDisplayBounds(nextDisplayBounds);\n    } else {\n      setTargetDisplayBounds(nextDisplayBounds);\n    }\n  }, [animate, firstDayOfWeek, reference]);\n  useEffect(function () {\n    if (targetDisplayBounds) {\n      if (targetDisplayBounds[0].getTime() < displayBounds[0].getTime()) {\n        // only animate if the duration is within a year\n        if (displayBounds[0].getTime() - targetDisplayBounds[0].getTime() < millisecondsPerYear) {\n          setDisplayBounds([targetDisplayBounds[0], displayBounds[1]]);\n          setSlide({\n            direction: 'down',\n            weeks: daysApart(displayBounds[0], targetDisplayBounds[0]) / 7\n          });\n          setAnimating(true);\n        }\n      } else if (targetDisplayBounds[1].getTime() > displayBounds[1].getTime()) {\n        if (targetDisplayBounds[1].getTime() - displayBounds[1].getTime() < millisecondsPerYear) {\n          setDisplayBounds([displayBounds[0], targetDisplayBounds[1]]);\n          setSlide({\n            direction: 'up',\n            weeks: daysApart(targetDisplayBounds[1], displayBounds[1]) / 7\n          });\n          setAnimating(true);\n        }\n      }\n\n      return undefined;\n    }\n\n    setSlide(undefined);\n    return undefined;\n  }, [animating, displayBounds, targetDisplayBounds]); // Last step in updating the displayBounds. Allows for pruning\n  // displayBounds and cleaning up states to occur after animation.\n\n  useEffect(function () {\n    if (animating && targetDisplayBounds) {\n      // Wait for animation to finish before cleaning up.\n      var timer = setTimeout(function () {\n        setDisplayBounds(targetDisplayBounds);\n        setTargetDisplayBounds(undefined);\n        setSlide(undefined);\n        setAnimating(false);\n      }, 400 // Empirically determined.\n      );\n      return function () {\n        return clearTimeout(timer);\n      };\n    }\n\n    return undefined;\n  }, [animating, targetDisplayBounds]); // We have to deal with reference being the end of a month with more\n  // days than the month we are changing to. So, we always set reference\n  // to the first of the month before changing the month.\n\n  var previousMonth = useMemo(function () {\n    return endOfMonth(subtractMonths(startOfMonth(reference), 1));\n  }, [reference]);\n  var nextMonth = useMemo(function () {\n    return startOfMonth(addMonths(startOfMonth(reference), 1));\n  }, [reference]);\n  var daysRef = useRef();\n\n  var _useState8 = useState(),\n      focus = _useState8[0],\n      setFocus = _useState8[1];\n\n  var _useState9 = useState(),\n      active = _useState9[0],\n      setActive = _useState9[1]; // when working on a range, remember the last selected date so we know\n  // how to handle subsequent date selection\n\n\n  var _useState10 = useState(),\n      lastSelectedDate = _useState10[0],\n      setLastSelectedDate = _useState10[1];\n\n  var changeReference = useCallback(function (nextReference) {\n    if (betweenDates(nextReference, validBounds)) {\n      setReference(nextReference);\n      if (onReference) onReference(nextReference.toISOString());\n    }\n  }, [onReference, validBounds]);\n  var selectDate = useCallback(function (selectedDate) {\n    var nextDates;\n    var nextDate;\n\n    if (!range) {\n      nextDate = selectedDate;\n    } else if (!dates) {\n      if (!date) {\n        nextDate = selectedDate;\n      } else {\n        var priorDate = new Date(date);\n        var selDate = new Date(selectedDate);\n\n        if (priorDate.getTime() < selDate.getTime()) {\n          nextDates = [[date, selectedDate]];\n          nextDate = undefined;\n        } else if (priorDate.getTime() > selDate.getTime()) {\n          nextDates = [[selectedDate, date]];\n          nextDate = undefined;\n        } else {\n          nextDate = undefined;\n        }\n      }\n    } else {\n      // have dates\n      var priorDates = dates[0].map(function (d) {\n        return new Date(d);\n      });\n      var previousDate = new Date(lastSelectedDate || dates[0][0]);\n\n      var _selDate = new Date(selectedDate);\n\n      if (_selDate.getTime() === priorDates[0].getTime()) {\n        var _dates$ = dates[0];\n        nextDate = _dates$[1];\n        nextDates = undefined;\n      } else if (_selDate.getTime() === priorDates[1].getTime()) {\n        var _dates$2 = dates[0];\n        nextDate = _dates$2[0];\n        nextDates = undefined;\n      } else if (_selDate.getTime() === previousDate.getTime()) {\n        if (_selDate.getTime() < priorDates[0].getTime()) {\n          nextDates = [[selectedDate, dates[0][1]]];\n        } else if (_selDate.getTime() > priorDates[0].getTime()) {\n          nextDates = [[dates[0][0], selectedDate]];\n        }\n      } else if (_selDate.getTime() < previousDate.getTime()) {\n        if (_selDate.getTime() < priorDates[0].getTime()) {\n          nextDates = [[selectedDate, dates[0][1]]];\n        } else if (_selDate.getTime() > priorDates[0].getTime()) {\n          nextDates = [[dates[0][0], selectedDate]];\n        }\n      } else if (_selDate.getTime() > previousDate.getTime()) {\n        if (_selDate.getTime() > priorDates[1].getTime()) {\n          nextDates = [[dates[0][0], selectedDate]];\n        } else if (_selDate.getTime() < priorDates[1].getTime()) {\n          nextDates = [[selectedDate, dates[0][1]]];\n        }\n      }\n    }\n\n    setDates(nextDates);\n    if (!dates) setDate(nextDate);\n    setActive(new Date(selectedDate));\n    setLastSelectedDate(selectedDate);\n    if (onSelect) onSelect(nextDates || nextDate);\n  }, [date, dates, lastSelectedDate, onSelect, range]);\n\n  var renderCalendarHeader = function renderCalendarHeader() {\n    var PreviousIcon = size === 'small' ? theme.calendar.icons.small.previous : theme.calendar.icons.previous;\n    var NextIcon = size === 'small' ? theme.calendar.icons.small.next : theme.calendar.icons.next;\n    return /*#__PURE__*/React.createElement(Box, {\n      direction: \"row\",\n      justify: \"between\",\n      align: \"center\"\n    }, /*#__PURE__*/React.createElement(Box, {\n      flex: true,\n      pad: {\n        horizontal: headingPadMap[size] || 'small'\n      }\n    }, /*#__PURE__*/React.createElement(Heading, {\n      level: size === 'small' ? theme.calendar.heading && theme.calendar.heading.level || 4 : (theme.calendar.heading && theme.calendar.heading.level || 4) - 1,\n      size: size,\n      margin: \"none\"\n    }, reference.toLocaleDateString(locale, {\n      month: 'long',\n      year: 'numeric'\n    }))), /*#__PURE__*/React.createElement(Box, {\n      flex: false,\n      direction: \"row\",\n      align: \"center\"\n    }, /*#__PURE__*/React.createElement(Button, {\n      a11yTitle: previousMonth.toLocaleDateString(locale, {\n        month: 'long',\n        year: 'numeric'\n      }),\n      icon: /*#__PURE__*/React.createElement(PreviousIcon, {\n        size: size !== 'small' ? size : undefined\n      }),\n      disabled: !betweenDates(previousMonth, validBounds),\n      onClick: function onClick() {\n        return changeReference(previousMonth);\n      }\n    }), /*#__PURE__*/React.createElement(Button, {\n      a11yTitle: nextMonth.toLocaleDateString(locale, {\n        month: 'long',\n        year: 'numeric'\n      }),\n      icon: /*#__PURE__*/React.createElement(NextIcon, {\n        size: size !== 'small' ? size : undefined\n      }),\n      disabled: !betweenDates(nextMonth, validBounds),\n      onClick: function onClick() {\n        return changeReference(nextMonth);\n      }\n    })));\n  };\n\n  var renderDaysOfWeek = function renderDaysOfWeek() {\n    var day = new Date(displayBounds[0]);\n    var days = [];\n\n    while (days.length < 7) {\n      days.push( /*#__PURE__*/React.createElement(StyledDayContainer, {\n        key: days.length,\n        sizeProp: size,\n        fillContainer: fill\n      }, /*#__PURE__*/React.createElement(StyledDay, {\n        otherMonth: true,\n        sizeProp: size,\n        fillContainer: fill\n      }, day.toLocaleDateString(locale, {\n        weekday: 'narrow'\n      }))));\n      day = addDays(day, 1);\n    }\n\n    return /*#__PURE__*/React.createElement(StyledWeek, null, days);\n  };\n\n  var weeks = [];\n  var day = new Date(displayBounds[0]);\n  var days;\n  var firstDayInMonth;\n\n  while (day.getTime() < displayBounds[1].getTime()) {\n    if (day.getDay() === firstDayOfWeek) {\n      if (days) {\n        weeks.push( /*#__PURE__*/React.createElement(StyledWeek, {\n          key: day.getTime(),\n          fillContainer: fill\n        }, days));\n      }\n\n      days = [];\n    }\n\n    var otherMonth = day.getMonth() !== reference.getMonth();\n\n    if (!showAdjacentDays && otherMonth) {\n      days.push( /*#__PURE__*/React.createElement(StyledDayContainer, {\n        key: day.getTime(),\n        sizeProp: size,\n        fillContainer: fill\n      }, /*#__PURE__*/React.createElement(StyledDay, {\n        sizeProp: size,\n        fillContainer: fill\n      })));\n    } else {\n      (function () {\n        var dateString = day.toISOString(); // this.dayRefs[dateString] = React.createRef();\n\n        var selected = false;\n        var inRange = false;\n        var selectedState = withinDates(day, date || dates);\n\n        if (selectedState === 2) {\n          selected = true;\n        } else if (selectedState === 1) {\n          inRange = true;\n        }\n\n        var dayDisabled = withinDates(day, disabled) || validBounds && !betweenDates(day, validBounds);\n\n        if (!firstDayInMonth && !dayDisabled && day.getMonth() === reference.getMonth()) {\n          firstDayInMonth = dateString;\n        }\n\n        if (!children) {\n          days.push( /*#__PURE__*/React.createElement(CalendarDay, {\n            key: day.getTime(),\n            buttonProps: {\n              a11yTitle: day.toDateString(),\n              active: active && active.getTime() === day.getTime(),\n              disabled: dayDisabled && !!dayDisabled,\n              onClick: function onClick() {\n                selectDate(dateString); // Chrome moves the focus indicator to this button. Set\n                // the focus to the grid of days instead.\n\n                daysRef.current.focus();\n              },\n              onMouseOver: function onMouseOver() {\n                return setActive(new Date(dateString));\n              },\n              onMouseOut: function onMouseOut() {\n                return setActive(undefined);\n              }\n            },\n            isInRange: inRange,\n            isSelected: selected,\n            otherMonth: day.getMonth() !== reference.getMonth(),\n            size: size,\n            fill: fill\n          }, day.getDate()));\n        } else {\n          days.push( /*#__PURE__*/React.createElement(CalendarCustomDay, {\n            key: day.getTime(),\n            buttonProps: onSelect ? {\n              a11yTitle: day.toDateString(),\n              active: active && active.getTime() === day.getTime(),\n              disabled: dayDisabled && !!dayDisabled,\n              onClick: function onClick() {\n                selectDate(dateString); // Chrome moves the focus indicator to this button. Set\n                // the focus to the grid of days instead.\n\n                daysRef.current.focus();\n              },\n              onMouseOver: function onMouseOver() {\n                return setActive(new Date(dateString));\n              },\n              onMouseOut: function onMouseOut() {\n                return setActive(undefined);\n              }\n            } : null,\n            size: size,\n            fill: fill\n          }, children({\n            date: day,\n            day: day.getDate(),\n            isInRange: inRange,\n            isSelected: selected\n          })));\n        }\n      })();\n    }\n\n    day = addDays(day, 1);\n  }\n\n  weeks.push( /*#__PURE__*/React.createElement(StyledWeek, {\n    key: day.getTime(),\n    fillContainer: fill\n  }, days));\n  return /*#__PURE__*/React.createElement(StyledCalendar, _extends({\n    ref: ref,\n    sizeProp: size,\n    fillContainer: fill\n  }, rest), /*#__PURE__*/React.createElement(Box, {\n    fill: fill\n  }, header ? header({\n    date: reference,\n    locale: locale,\n    onPreviousMonth: function onPreviousMonth() {\n      return changeReference(previousMonth);\n    },\n    onNextMonth: function onNextMonth() {\n      return changeReference(nextMonth);\n    },\n    previousInBound: betweenDates(previousMonth, validBounds),\n    nextInBound: betweenDates(nextMonth, validBounds)\n  }) : renderCalendarHeader(previousMonth, nextMonth), daysOfWeek && renderDaysOfWeek(), /*#__PURE__*/React.createElement(Keyboard, {\n    onEnter: function onEnter() {\n      return selectDate(active.toISOString());\n    },\n    onUp: function onUp(event) {\n      event.preventDefault();\n      event.stopPropagation(); // so the page doesn't scroll\n\n      setActive(addDays(active, -7));\n    },\n    onDown: function onDown(event) {\n      event.preventDefault();\n      event.stopPropagation(); // so the page doesn't scroll\n\n      setActive(addDays(active, 7));\n    },\n    onLeft: function onLeft() {\n      return active && setActive(addDays(active, -1));\n    },\n    onRight: function onRight() {\n      return active && setActive(addDays(active, 1));\n    }\n  }, /*#__PURE__*/React.createElement(StyledWeeksContainer, {\n    ref: daysRef,\n    sizeProp: size,\n    fillContainer: fill,\n    tabIndex: 0,\n    focus: focus,\n    onFocus: function onFocus() {\n      setFocus(true);\n\n      if (date && betweenDates(new Date(date), displayBounds)) {\n        setActive(new Date(date));\n      } else {\n        setActive(new Date(firstDayInMonth));\n      }\n    },\n    onBlur: function onBlur() {\n      setFocus(false);\n      setActive(undefined);\n    }\n  }, /*#__PURE__*/React.createElement(StyledWeeks, {\n    slide: slide,\n    sizeProp: size,\n    fillContainer: fill\n  }, weeks)))));\n});\nCalendar.displayName = 'Calendar';\nvar CalendarDoc;\n\nif (process.env.NODE_ENV !== 'production') {\n  // eslint-disable-next-line global-require\n  CalendarDoc = require('./doc').doc(Calendar);\n}\n\nvar CalendarWrapper = CalendarDoc || Calendar;\nexport { CalendarWrapper as Calendar };","map":{"version":3,"sources":["/Users/jeffreynaef/go/src/github.com/n3wscott/sockeye/frontend/node_modules/grommet/es6/components/Calendar/Calendar.js"],"names":["_objectWithoutPropertiesLoose","source","excluded","target","sourceKeys","Object","keys","key","i","length","indexOf","_extends","assign","arguments","prototype","hasOwnProperty","call","apply","React","forwardRef","useCallback","useContext","useMemo","useRef","useState","useEffect","ThemeContext","defaultProps","Box","Button","Heading","Keyboard","StyledCalendar","StyledDay","StyledDayContainer","StyledWeek","StyledWeeks","StyledWeeksContainer","addDays","addMonths","betweenDates","daysApart","endOfMonth","startOfMonth","subtractDays","subtractMonths","withinDates","headingPadMap","small","medium","large","normalizeReference","reference","date","dates","normalizedReference","Date","Array","isArray","setHours","buildDisplayBounds","firstDayOfWeek","start","setDate","getDay","end","millisecondsPerYear","CalendarDayButton","props","createElement","tabIndex","plain","CalendarDay","_ref","children","fill","size","isInRange","isSelected","otherMonth","_ref$buttonProps","buttonProps","sizeProp","fillContainer","inRange","CalendarCustomDay","_ref2","Calendar","_ref3","ref","_ref3$animate","animate","validBounds","bounds","dateProp","datesProp","daysOfWeek","disabled","_ref3$firstDayOfWeek","header","_ref3$locale","locale","onReference","onSelect","range","referenceProp","_ref3$showAdjacentDay","showAdjacentDays","_ref3$size","rest","theme","_useState","_useState2","setDates","_useState3","setReference","_useState4","displayBounds","setDisplayBounds","_useState5","targetDisplayBounds","setTargetDisplayBounds","_useState6","slide","setSlide","_useState7","animating","setAnimating","nextDisplayBounds","diffBoundsAboveYearFlag","sameDisplayBounds","getTime","direction","weeks","undefined","timer","setTimeout","clearTimeout","previousMonth","nextMonth","daysRef","_useState8","focus","setFocus","_useState9","active","setActive","_useState10","lastSelectedDate","setLastSelectedDate","changeReference","nextReference","toISOString","selectDate","selectedDate","nextDates","nextDate","priorDate","selDate","priorDates","map","d","previousDate","_selDate","_dates$","_dates$2","renderCalendarHeader","PreviousIcon","calendar","icons","previous","NextIcon","next","justify","align","flex","pad","horizontal","level","heading","margin","toLocaleDateString","month","year","a11yTitle","icon","onClick","renderDaysOfWeek","day","days","push","weekday","firstDayInMonth","getMonth","dateString","selected","selectedState","dayDisabled","toDateString","current","onMouseOver","onMouseOut","getDate","onPreviousMonth","onNextMonth","previousInBound","nextInBound","onEnter","onUp","event","preventDefault","stopPropagation","onDown","onLeft","onRight","onFocus","onBlur","displayName","CalendarDoc","process","env","NODE_ENV","require","doc","CalendarWrapper"],"mappings":"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","sourcesContent":["function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React, { forwardRef, useCallback, useContext, useMemo, useRef, useState, useEffect } from 'react';\nimport { ThemeContext } from 'styled-components';\nimport { defaultProps } from '../../default-props';\nimport { Box } from '../Box';\nimport { Button } from '../Button';\nimport { Heading } from '../Heading';\nimport { Keyboard } from '../Keyboard';\nimport { StyledCalendar, StyledDay, StyledDayContainer, StyledWeek, StyledWeeks, StyledWeeksContainer } from './StyledCalendar';\nimport { addDays, addMonths, betweenDates, daysApart, endOfMonth, startOfMonth, subtractDays, subtractMonths, withinDates } from './utils';\nvar headingPadMap = {\n  small: 'xsmall',\n  medium: 'small',\n  large: 'medium'\n};\n\nvar normalizeReference = function normalizeReference(reference, date, dates) {\n  var normalizedReference;\n\n  if (reference) {\n    normalizedReference = new Date(reference);\n  } else if (date) {\n    normalizedReference = new Date(date);\n  } else if (dates && dates.length > 0) {\n    if (typeof dates[0] === 'string') {\n      normalizedReference = new Date(dates[0]);\n    } else if (Array.isArray(dates[0])) {\n      normalizedReference = new Date(dates[0][0]);\n    } else {\n      normalizedReference = new Date();\n      normalizedReference.setHours(0, 0, 0, 0);\n    }\n  } else {\n    normalizedReference = new Date();\n    normalizedReference.setHours(0, 0, 0, 0);\n  }\n\n  return normalizedReference;\n};\n\nvar buildDisplayBounds = function buildDisplayBounds(reference, firstDayOfWeek) {\n  var start = new Date(reference);\n  start.setDate(1); // first of month\n  // In case Sunday is the first day of the month, and the user asked for Monday\n  // to be the first day of the week, then we need to include Sunday and six\n  // days prior.\n\n  start = start.getDay() === 0 && firstDayOfWeek === 1 ? start = subtractDays(start, 6) : // beginning of week\n  start = subtractDays(start, start.getDay() - firstDayOfWeek);\n  var end = addDays(start, 7 * 5 + 7); // 5 weeks to end of week\n\n  return [start, end];\n};\n\nvar millisecondsPerYear = 31557600000;\n\nvar CalendarDayButton = function CalendarDayButton(props) {\n  return /*#__PURE__*/React.createElement(Button, _extends({\n    tabIndex: -1,\n    plain: true\n  }, props));\n};\n\nvar CalendarDay = function CalendarDay(_ref) {\n  var children = _ref.children,\n      fill = _ref.fill,\n      size = _ref.size,\n      isInRange = _ref.isInRange,\n      isSelected = _ref.isSelected,\n      otherMonth = _ref.otherMonth,\n      _ref$buttonProps = _ref.buttonProps,\n      buttonProps = _ref$buttonProps === void 0 ? {} : _ref$buttonProps;\n  return /*#__PURE__*/React.createElement(StyledDayContainer, {\n    sizeProp: size,\n    fillContainer: fill\n  }, /*#__PURE__*/React.createElement(CalendarDayButton, _extends({\n    fill: fill\n  }, buttonProps), /*#__PURE__*/React.createElement(StyledDay, {\n    inRange: isInRange,\n    otherMonth: otherMonth,\n    isSelected: isSelected,\n    sizeProp: size,\n    fillContainer: fill\n  }, children)));\n};\n\nvar CalendarCustomDay = function CalendarCustomDay(_ref2) {\n  var children = _ref2.children,\n      fill = _ref2.fill,\n      size = _ref2.size,\n      buttonProps = _ref2.buttonProps;\n\n  if (!buttonProps) {\n    return /*#__PURE__*/React.createElement(StyledDayContainer, {\n      sizeProp: size,\n      fillContainer: fill\n    }, children);\n  }\n\n  return /*#__PURE__*/React.createElement(StyledDayContainer, {\n    sizeProp: size,\n    fillContainer: fill\n  }, /*#__PURE__*/React.createElement(CalendarDayButton, _extends({\n    fill: fill\n  }, buttonProps), children));\n};\n\nvar Calendar = /*#__PURE__*/forwardRef(function (_ref3, ref) {\n  var _ref3$animate = _ref3.animate,\n      animate = _ref3$animate === void 0 ? true : _ref3$animate,\n      validBounds = _ref3.bounds,\n      children = _ref3.children,\n      dateProp = _ref3.date,\n      datesProp = _ref3.dates,\n      daysOfWeek = _ref3.daysOfWeek,\n      disabled = _ref3.disabled,\n      fill = _ref3.fill,\n      _ref3$firstDayOfWeek = _ref3.firstDayOfWeek,\n      firstDayOfWeek = _ref3$firstDayOfWeek === void 0 ? 0 : _ref3$firstDayOfWeek,\n      header = _ref3.header,\n      _ref3$locale = _ref3.locale,\n      locale = _ref3$locale === void 0 ? 'en-US' : _ref3$locale,\n      onReference = _ref3.onReference,\n      onSelect = _ref3.onSelect,\n      range = _ref3.range,\n      referenceProp = _ref3.reference,\n      _ref3$showAdjacentDay = _ref3.showAdjacentDays,\n      showAdjacentDays = _ref3$showAdjacentDay === void 0 ? true : _ref3$showAdjacentDay,\n      _ref3$size = _ref3.size,\n      size = _ref3$size === void 0 ? 'medium' : _ref3$size,\n      rest = _objectWithoutPropertiesLoose(_ref3, [\"animate\", \"bounds\", \"children\", \"date\", \"dates\", \"daysOfWeek\", \"disabled\", \"fill\", \"firstDayOfWeek\", \"header\", \"locale\", \"onReference\", \"onSelect\", \"range\", \"reference\", \"showAdjacentDays\", \"size\"]);\n\n  var theme = useContext(ThemeContext) || defaultProps.theme; // set date when caller changes it, allows us to change it internally too\n\n  var _useState = useState(dateProp),\n      date = _useState[0],\n      setDate = _useState[1];\n\n  useEffect(function () {\n    return setDate(dateProp);\n  }, [dateProp]); // set dates when caller changes it, allows us to change it internally too\n\n  var _useState2 = useState(datesProp),\n      dates = _useState2[0],\n      setDates = _useState2[1];\n\n  useEffect(function () {\n    return setDates(datesProp);\n  }, [datesProp]); // set reference based on what the caller passed or date/dates.\n\n  var _useState3 = useState(normalizeReference(referenceProp, date, dates)),\n      reference = _useState3[0],\n      setReference = _useState3[1];\n\n  useEffect(function () {\n    return setReference(normalizeReference(referenceProp, dateProp, datesProp));\n  }, [dateProp, datesProp, referenceProp]); // calculate the bounds we display based on the reference\n\n  var _useState4 = useState(buildDisplayBounds(reference, firstDayOfWeek)),\n      displayBounds = _useState4[0],\n      setDisplayBounds = _useState4[1];\n\n  var _useState5 = useState(),\n      targetDisplayBounds = _useState5[0],\n      setTargetDisplayBounds = _useState5[1];\n\n  var _useState6 = useState(),\n      slide = _useState6[0],\n      setSlide = _useState6[1];\n\n  var _useState7 = useState(),\n      animating = _useState7[0],\n      setAnimating = _useState7[1]; // When the reference changes, we need to update the displayBounds.\n  // This is easy when we aren't animating. If we are animating,\n  // we temporarily increase the displayBounds to be the union of the old\n  // and new ones and set slide to drive the animation. We keep track\n  // of where we are heading via targetDisplayBounds. When the animation\n  // finishes, we prune displayBounds down to where we are headed and\n  // clear the slide and targetDisplayBounds.\n\n\n  useEffect(function () {\n    var nextDisplayBounds = buildDisplayBounds(reference, firstDayOfWeek); // Checks if the difference between the current and next DisplayBounds is\n    // greater than a year. If that's the case, calendar should update without\n    // animation.\n\n    var diffBoundsAboveYearFlag = false;\n    var sameDisplayBounds = false;\n\n    if (nextDisplayBounds[0].getTime() < displayBounds[0].getTime()) {\n      if (displayBounds[0].getTime() - nextDisplayBounds[0].getTime() > millisecondsPerYear) {\n        diffBoundsAboveYearFlag = true;\n      }\n    } else if (nextDisplayBounds[1].getTime() > displayBounds[1].getTime()) {\n      if (nextDisplayBounds[1].getTime() - displayBounds[1].getTime() > millisecondsPerYear) {\n        diffBoundsAboveYearFlag = true;\n      }\n    } else if (nextDisplayBounds[0].getTime() === displayBounds[0].getTime() && nextDisplayBounds[1].getTime() === displayBounds[1].getTime()) {\n      sameDisplayBounds = true;\n    }\n\n    if (!animate || diffBoundsAboveYearFlag || sameDisplayBounds) {\n      setDisplayBounds(nextDisplayBounds);\n    } else {\n      setTargetDisplayBounds(nextDisplayBounds);\n    }\n  }, [animate, firstDayOfWeek, reference]);\n  useEffect(function () {\n    if (targetDisplayBounds) {\n      if (targetDisplayBounds[0].getTime() < displayBounds[0].getTime()) {\n        // only animate if the duration is within a year\n        if (displayBounds[0].getTime() - targetDisplayBounds[0].getTime() < millisecondsPerYear) {\n          setDisplayBounds([targetDisplayBounds[0], displayBounds[1]]);\n          setSlide({\n            direction: 'down',\n            weeks: daysApart(displayBounds[0], targetDisplayBounds[0]) / 7\n          });\n          setAnimating(true);\n        }\n      } else if (targetDisplayBounds[1].getTime() > displayBounds[1].getTime()) {\n        if (targetDisplayBounds[1].getTime() - displayBounds[1].getTime() < millisecondsPerYear) {\n          setDisplayBounds([displayBounds[0], targetDisplayBounds[1]]);\n          setSlide({\n            direction: 'up',\n            weeks: daysApart(targetDisplayBounds[1], displayBounds[1]) / 7\n          });\n          setAnimating(true);\n        }\n      }\n\n      return undefined;\n    }\n\n    setSlide(undefined);\n    return undefined;\n  }, [animating, displayBounds, targetDisplayBounds]); // Last step in updating the displayBounds. Allows for pruning\n  // displayBounds and cleaning up states to occur after animation.\n\n  useEffect(function () {\n    if (animating && targetDisplayBounds) {\n      // Wait for animation to finish before cleaning up.\n      var timer = setTimeout(function () {\n        setDisplayBounds(targetDisplayBounds);\n        setTargetDisplayBounds(undefined);\n        setSlide(undefined);\n        setAnimating(false);\n      }, 400 // Empirically determined.\n      );\n      return function () {\n        return clearTimeout(timer);\n      };\n    }\n\n    return undefined;\n  }, [animating, targetDisplayBounds]); // We have to deal with reference being the end of a month with more\n  // days than the month we are changing to. So, we always set reference\n  // to the first of the month before changing the month.\n\n  var previousMonth = useMemo(function () {\n    return endOfMonth(subtractMonths(startOfMonth(reference), 1));\n  }, [reference]);\n  var nextMonth = useMemo(function () {\n    return startOfMonth(addMonths(startOfMonth(reference), 1));\n  }, [reference]);\n  var daysRef = useRef();\n\n  var _useState8 = useState(),\n      focus = _useState8[0],\n      setFocus = _useState8[1];\n\n  var _useState9 = useState(),\n      active = _useState9[0],\n      setActive = _useState9[1]; // when working on a range, remember the last selected date so we know\n  // how to handle subsequent date selection\n\n\n  var _useState10 = useState(),\n      lastSelectedDate = _useState10[0],\n      setLastSelectedDate = _useState10[1];\n\n  var changeReference = useCallback(function (nextReference) {\n    if (betweenDates(nextReference, validBounds)) {\n      setReference(nextReference);\n      if (onReference) onReference(nextReference.toISOString());\n    }\n  }, [onReference, validBounds]);\n  var selectDate = useCallback(function (selectedDate) {\n    var nextDates;\n    var nextDate;\n\n    if (!range) {\n      nextDate = selectedDate;\n    } else if (!dates) {\n      if (!date) {\n        nextDate = selectedDate;\n      } else {\n        var priorDate = new Date(date);\n        var selDate = new Date(selectedDate);\n\n        if (priorDate.getTime() < selDate.getTime()) {\n          nextDates = [[date, selectedDate]];\n          nextDate = undefined;\n        } else if (priorDate.getTime() > selDate.getTime()) {\n          nextDates = [[selectedDate, date]];\n          nextDate = undefined;\n        } else {\n          nextDate = undefined;\n        }\n      }\n    } else {\n      // have dates\n      var priorDates = dates[0].map(function (d) {\n        return new Date(d);\n      });\n      var previousDate = new Date(lastSelectedDate || dates[0][0]);\n\n      var _selDate = new Date(selectedDate);\n\n      if (_selDate.getTime() === priorDates[0].getTime()) {\n        var _dates$ = dates[0];\n        nextDate = _dates$[1];\n        nextDates = undefined;\n      } else if (_selDate.getTime() === priorDates[1].getTime()) {\n        var _dates$2 = dates[0];\n        nextDate = _dates$2[0];\n        nextDates = undefined;\n      } else if (_selDate.getTime() === previousDate.getTime()) {\n        if (_selDate.getTime() < priorDates[0].getTime()) {\n          nextDates = [[selectedDate, dates[0][1]]];\n        } else if (_selDate.getTime() > priorDates[0].getTime()) {\n          nextDates = [[dates[0][0], selectedDate]];\n        }\n      } else if (_selDate.getTime() < previousDate.getTime()) {\n        if (_selDate.getTime() < priorDates[0].getTime()) {\n          nextDates = [[selectedDate, dates[0][1]]];\n        } else if (_selDate.getTime() > priorDates[0].getTime()) {\n          nextDates = [[dates[0][0], selectedDate]];\n        }\n      } else if (_selDate.getTime() > previousDate.getTime()) {\n        if (_selDate.getTime() > priorDates[1].getTime()) {\n          nextDates = [[dates[0][0], selectedDate]];\n        } else if (_selDate.getTime() < priorDates[1].getTime()) {\n          nextDates = [[selectedDate, dates[0][1]]];\n        }\n      }\n    }\n\n    setDates(nextDates);\n    if (!dates) setDate(nextDate);\n    setActive(new Date(selectedDate));\n    setLastSelectedDate(selectedDate);\n    if (onSelect) onSelect(nextDates || nextDate);\n  }, [date, dates, lastSelectedDate, onSelect, range]);\n\n  var renderCalendarHeader = function renderCalendarHeader() {\n    var PreviousIcon = size === 'small' ? theme.calendar.icons.small.previous : theme.calendar.icons.previous;\n    var NextIcon = size === 'small' ? theme.calendar.icons.small.next : theme.calendar.icons.next;\n    return /*#__PURE__*/React.createElement(Box, {\n      direction: \"row\",\n      justify: \"between\",\n      align: \"center\"\n    }, /*#__PURE__*/React.createElement(Box, {\n      flex: true,\n      pad: {\n        horizontal: headingPadMap[size] || 'small'\n      }\n    }, /*#__PURE__*/React.createElement(Heading, {\n      level: size === 'small' ? theme.calendar.heading && theme.calendar.heading.level || 4 : (theme.calendar.heading && theme.calendar.heading.level || 4) - 1,\n      size: size,\n      margin: \"none\"\n    }, reference.toLocaleDateString(locale, {\n      month: 'long',\n      year: 'numeric'\n    }))), /*#__PURE__*/React.createElement(Box, {\n      flex: false,\n      direction: \"row\",\n      align: \"center\"\n    }, /*#__PURE__*/React.createElement(Button, {\n      a11yTitle: previousMonth.toLocaleDateString(locale, {\n        month: 'long',\n        year: 'numeric'\n      }),\n      icon: /*#__PURE__*/React.createElement(PreviousIcon, {\n        size: size !== 'small' ? size : undefined\n      }),\n      disabled: !betweenDates(previousMonth, validBounds),\n      onClick: function onClick() {\n        return changeReference(previousMonth);\n      }\n    }), /*#__PURE__*/React.createElement(Button, {\n      a11yTitle: nextMonth.toLocaleDateString(locale, {\n        month: 'long',\n        year: 'numeric'\n      }),\n      icon: /*#__PURE__*/React.createElement(NextIcon, {\n        size: size !== 'small' ? size : undefined\n      }),\n      disabled: !betweenDates(nextMonth, validBounds),\n      onClick: function onClick() {\n        return changeReference(nextMonth);\n      }\n    })));\n  };\n\n  var renderDaysOfWeek = function renderDaysOfWeek() {\n    var day = new Date(displayBounds[0]);\n    var days = [];\n\n    while (days.length < 7) {\n      days.push( /*#__PURE__*/React.createElement(StyledDayContainer, {\n        key: days.length,\n        sizeProp: size,\n        fillContainer: fill\n      }, /*#__PURE__*/React.createElement(StyledDay, {\n        otherMonth: true,\n        sizeProp: size,\n        fillContainer: fill\n      }, day.toLocaleDateString(locale, {\n        weekday: 'narrow'\n      }))));\n      day = addDays(day, 1);\n    }\n\n    return /*#__PURE__*/React.createElement(StyledWeek, null, days);\n  };\n\n  var weeks = [];\n  var day = new Date(displayBounds[0]);\n  var days;\n  var firstDayInMonth;\n\n  while (day.getTime() < displayBounds[1].getTime()) {\n    if (day.getDay() === firstDayOfWeek) {\n      if (days) {\n        weeks.push( /*#__PURE__*/React.createElement(StyledWeek, {\n          key: day.getTime(),\n          fillContainer: fill\n        }, days));\n      }\n\n      days = [];\n    }\n\n    var otherMonth = day.getMonth() !== reference.getMonth();\n\n    if (!showAdjacentDays && otherMonth) {\n      days.push( /*#__PURE__*/React.createElement(StyledDayContainer, {\n        key: day.getTime(),\n        sizeProp: size,\n        fillContainer: fill\n      }, /*#__PURE__*/React.createElement(StyledDay, {\n        sizeProp: size,\n        fillContainer: fill\n      })));\n    } else {\n      (function () {\n        var dateString = day.toISOString(); // this.dayRefs[dateString] = React.createRef();\n\n        var selected = false;\n        var inRange = false;\n        var selectedState = withinDates(day, date || dates);\n\n        if (selectedState === 2) {\n          selected = true;\n        } else if (selectedState === 1) {\n          inRange = true;\n        }\n\n        var dayDisabled = withinDates(day, disabled) || validBounds && !betweenDates(day, validBounds);\n\n        if (!firstDayInMonth && !dayDisabled && day.getMonth() === reference.getMonth()) {\n          firstDayInMonth = dateString;\n        }\n\n        if (!children) {\n          days.push( /*#__PURE__*/React.createElement(CalendarDay, {\n            key: day.getTime(),\n            buttonProps: {\n              a11yTitle: day.toDateString(),\n              active: active && active.getTime() === day.getTime(),\n              disabled: dayDisabled && !!dayDisabled,\n              onClick: function onClick() {\n                selectDate(dateString); // Chrome moves the focus indicator to this button. Set\n                // the focus to the grid of days instead.\n\n                daysRef.current.focus();\n              },\n              onMouseOver: function onMouseOver() {\n                return setActive(new Date(dateString));\n              },\n              onMouseOut: function onMouseOut() {\n                return setActive(undefined);\n              }\n            },\n            isInRange: inRange,\n            isSelected: selected,\n            otherMonth: day.getMonth() !== reference.getMonth(),\n            size: size,\n            fill: fill\n          }, day.getDate()));\n        } else {\n          days.push( /*#__PURE__*/React.createElement(CalendarCustomDay, {\n            key: day.getTime(),\n            buttonProps: onSelect ? {\n              a11yTitle: day.toDateString(),\n              active: active && active.getTime() === day.getTime(),\n              disabled: dayDisabled && !!dayDisabled,\n              onClick: function onClick() {\n                selectDate(dateString); // Chrome moves the focus indicator to this button. Set\n                // the focus to the grid of days instead.\n\n                daysRef.current.focus();\n              },\n              onMouseOver: function onMouseOver() {\n                return setActive(new Date(dateString));\n              },\n              onMouseOut: function onMouseOut() {\n                return setActive(undefined);\n              }\n            } : null,\n            size: size,\n            fill: fill\n          }, children({\n            date: day,\n            day: day.getDate(),\n            isInRange: inRange,\n            isSelected: selected\n          })));\n        }\n      })();\n    }\n\n    day = addDays(day, 1);\n  }\n\n  weeks.push( /*#__PURE__*/React.createElement(StyledWeek, {\n    key: day.getTime(),\n    fillContainer: fill\n  }, days));\n  return /*#__PURE__*/React.createElement(StyledCalendar, _extends({\n    ref: ref,\n    sizeProp: size,\n    fillContainer: fill\n  }, rest), /*#__PURE__*/React.createElement(Box, {\n    fill: fill\n  }, header ? header({\n    date: reference,\n    locale: locale,\n    onPreviousMonth: function onPreviousMonth() {\n      return changeReference(previousMonth);\n    },\n    onNextMonth: function onNextMonth() {\n      return changeReference(nextMonth);\n    },\n    previousInBound: betweenDates(previousMonth, validBounds),\n    nextInBound: betweenDates(nextMonth, validBounds)\n  }) : renderCalendarHeader(previousMonth, nextMonth), daysOfWeek && renderDaysOfWeek(), /*#__PURE__*/React.createElement(Keyboard, {\n    onEnter: function onEnter() {\n      return selectDate(active.toISOString());\n    },\n    onUp: function onUp(event) {\n      event.preventDefault();\n      event.stopPropagation(); // so the page doesn't scroll\n\n      setActive(addDays(active, -7));\n    },\n    onDown: function onDown(event) {\n      event.preventDefault();\n      event.stopPropagation(); // so the page doesn't scroll\n\n      setActive(addDays(active, 7));\n    },\n    onLeft: function onLeft() {\n      return active && setActive(addDays(active, -1));\n    },\n    onRight: function onRight() {\n      return active && setActive(addDays(active, 1));\n    }\n  }, /*#__PURE__*/React.createElement(StyledWeeksContainer, {\n    ref: daysRef,\n    sizeProp: size,\n    fillContainer: fill,\n    tabIndex: 0,\n    focus: focus,\n    onFocus: function onFocus() {\n      setFocus(true);\n\n      if (date && betweenDates(new Date(date), displayBounds)) {\n        setActive(new Date(date));\n      } else {\n        setActive(new Date(firstDayInMonth));\n      }\n    },\n    onBlur: function onBlur() {\n      setFocus(false);\n      setActive(undefined);\n    }\n  }, /*#__PURE__*/React.createElement(StyledWeeks, {\n    slide: slide,\n    sizeProp: size,\n    fillContainer: fill\n  }, weeks)))));\n});\nCalendar.displayName = 'Calendar';\nvar CalendarDoc;\n\nif (process.env.NODE_ENV !== 'production') {\n  // eslint-disable-next-line global-require\n  CalendarDoc = require('./doc').doc(Calendar);\n}\n\nvar CalendarWrapper = CalendarDoc || Calendar;\nexport { CalendarWrapper as Calendar };"]},"metadata":{},"sourceType":"module"}