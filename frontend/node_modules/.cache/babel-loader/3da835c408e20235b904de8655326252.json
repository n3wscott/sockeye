{"ast":null,"code":"function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nimport React, { forwardRef } from 'react';\nimport { ThemeContext } from 'styled-components';\nimport { defaultProps } from '../../default-props';\nimport { normalizeColor, parseMetricToNum } from '../../utils';\nimport { StyledWorldMap } from './StyledWorldMap'; // The graphic is drawn as a rectangular grid using coordinates spaced\n// by FACTOR pixels. The contents have both an area boundary for interaction\n// and dots described as rows where each row is described by three values:\n// a starting coordinate and a length. This approach is more efficient than\n// describing it via SVG elements, keeping the code/library size smaller.\n\nvar CONTINENTS = [{\n  name: 'Australia',\n  origin: [74, 32],\n  area: [[4, 0], [7, 1], [15, 7], [13, 9], [0, 6], [0, 2]],\n  dots: [[4, 0, 1], [2, 1, 6], [0, 2, 9], [0, 3, 10], [0, 4, 10], [0, 5, 3], [5, 5, 5], [5, 6, 4], [15, 7, 1], [14, 8, 1], [13, 9, 1]]\n}, {\n  name: 'Asia',\n  origin: [52, 1],\n  area: [[16, 0], [38, 5], [40, 7], [28, 17], [24, 25], [29, 29], [19, 29], [11, 24], [3, 23], [0, 20], [0, 19], [6, 13], [7, 6]],\n  dots: [[16, 0, 1], [17, 1, 2], [18, 2, 2], [15, 3, 6], [28, 3, 1], [30, 3, 1], [10, 4, 2], [13, 4, 10], [24, 4, 1], [9, 5, 22], [32, 5, 1], [38, 5, 1], [7, 6, 2], [10, 6, 1], [12, 6, 27], [7, 7, 34], [7, 8, 31], [7, 9, 26], [34, 9, 3], [7, 10, 22], [31, 10, 1], [33, 10, 1], [7, 11, 21], [32, 11, 2], [7, 12, 21], [32, 12, 1], [6, 13, 22], [32, 13, 1], [6, 14, 22], [5, 15, 22], [3, 16, 2], [6, 16, 20], [2, 17, 3], [6, 17, 16], [24, 17, 1], [28, 17, 1], [1, 18, 22], [26, 18, 2], [0, 19, 24], [0, 20, 5], [6, 20, 17], [2, 21, 5], [10, 21, 14], [2, 22, 5], [11, 22, 4], [16, 22, 4], [3, 23, 3], [11, 23, 2], [17, 23, 3], [23, 23, 1], [11, 24, 2], [18, 24, 2], [23, 24, 1], [24, 25, 1], [18, 26, 1], [22, 26, 1], [18, 27, 1], [20, 27, 4], [18, 28, 1], [21, 28, 1], [23, 28, 1], [26, 28, 3], [19, 29, 1], [28, 29, 2]]\n}, {\n  // 21X, 40Y\n  name: 'Africa',\n  origin: [40, 19],\n  area: [[3, 0], [6, 0], [11, 2], [16, 7], [16, 15], [11, 18], [9, 18], [0, 6], [0, 3]],\n  dots: [[3, 0, 4], [2, 1, 6], [9, 1, 2], [1, 2, 11], [0, 3, 13], [0, 4, 14], [0, 5, 14], [0, 6, 16], [1, 7, 16], [2, 8, 2], [6, 8, 11], [7, 9, 9], [7, 10, 8], [7, 11, 7], [8, 12, 7], [7, 13, 8], [7, 14, 7], [16, 14, 1], [8, 15, 5], [15, 15, 2], [8, 16, 5], [9, 17, 3], [9, 18, 3]]\n}, {\n  name: 'Europe',\n  origin: [39, 2],\n  area: [[8, 0], [10, 0], [20, 2], [19, 11], [18, 13], [14, 16], [3, 16], [0, 7]],\n  dots: [[8, 0, 3], [9, 1, 1], [20, 2, 1], [19, 3, 1], [12, 4, 1], [19, 4, 1], [9, 5, 6], [9, 6, 7], [17, 6, 3], [0, 7, 1], [8, 7, 12], [7, 8, 3], [11, 8, 9], [7, 9, 3], [11, 9, 9], [4, 10, 1], [7, 10, 1], [9, 10, 1], [11, 10, 9], [3, 11, 2], [7, 11, 13], [4, 12, 1], [6, 12, 13], [4, 13, 15], [5, 14, 3], [9, 14, 4], [15, 14, 2], [3, 15, 3], [8, 15, 1], [10, 15, 5], [6, 15, 2], [3, 16, 2], [10, 16, 5]]\n}, {\n  name: 'South America',\n  origin: [22, 26],\n  area: [[2, 0], [5, 0], [11, 4], [11, 8], [3, 18], [2, 17], [0, 4], [0, 3]],\n  dots: [[2, 0, 4], [1, 1, 7], [1, 2, 7], [0, 3, 10], [0, 4, 12], [1, 5, 11], [2, 6, 9], [3, 7, 8], [3, 8, 8], [3, 9, 6], [3, 10, 6], [3, 11, 5], [3, 12, 3], [2, 13, 3], [2, 14, 3], [2, 15, 2], [2, 16, 2], [2, 17, 2], [3, 18, 1]]\n}, {\n  name: 'North America',\n  origin: [0, 0],\n  area: [[21, 0], [39, 0], [39, 6], [22, 26], [16, 23], [2, 12], [0, 7]],\n  dots: [[22, 0, 6], [29, 0, 1], [31, 0, 1], [33, 0, 5], [20, 1, 1], [22, 1, 1], [24, 1, 2], [27, 1, 13], [17, 2, 1], [20, 2, 5], [26, 2, 13], [13, 3, 1], [19, 3, 1], [21, 3, 3], [26, 3, 14], [14, 4, 1], [16, 4, 4], [21, 4, 3], [29, 4, 11], [12, 5, 3], [16, 5, 1], [18, 5, 1], [20, 5, 3], [24, 5, 1], [30, 5, 8], [14, 6, 3], [19, 6, 1], [22, 6, 4], [31, 6, 8], [0, 7, 15], [16, 7, 1], [18, 7, 4], [24, 7, 2], [30, 7, 7], [2, 8, 20], [24, 8, 3], [29, 8, 5], [2, 9, 20], [24, 9, 2], [30, 9, 3], [1, 10, 18], [23, 10, 2], [31, 10, 1], [2, 11, 2], [8, 11, 11], [23, 11, 2], [26, 11, 1], [2, 12, 1], [8, 12, 13], [24, 12, 3], [10, 13, 12], [23, 13, 5], [11, 14, 17], [11, 15, 9], [21, 15, 6], [28, 15, 2], [11, 16, 11], [23, 16, 4], [11, 17, 14], [12, 18, 11], [12, 19, 12], [13, 20, 9], [15, 21, 3], [22, 21, 1], [16, 22, 2], [16, 23, 2], [20, 23, 1], [23, 23, 1], [18, 24, 3], [21, 25, 1], [22, 26, 1]]\n}]; // FACTOR is the distance in pixels between coordinates\n\nvar FACTOR = 10;\n\nvar maxCoordinate = function maxCoordinate(a, b) {\n  return [Math.max(a[0], b[0]), Math.max(a[1], b[1])];\n}; // const minCoordinate = (a, b) =>\n//   [Math.min(a[0], b[0]), Math.min(a[1], b[1])];\n// Based on https://stackoverflow.com/a/43861247\n\n\nvar MAP_LAT_BOTTOM = -50.0; // empirically determined\n\nvar MAP_LAT_BOTTOM_RAD = MAP_LAT_BOTTOM * Math.PI / 180;\nvar MAP_LON_LEFT = -171.0; // empirically determined\n\nvar MAP_LON_RIGHT = 184.0; // empirically determined\n\nvar MAP_LON_DELTA = MAP_LON_RIGHT - MAP_LON_LEFT;\n\nvar mapValues = function mapValues(extent) {\n  var mapRadius = extent[0] / MAP_LON_DELTA * 360 / (2 * Math.PI);\n  var mapOffsetY = Math.round(mapRadius / 2 * Math.log((1 + Math.sin(MAP_LAT_BOTTOM_RAD)) / (1 - Math.sin(MAP_LAT_BOTTOM_RAD))));\n  return {\n    mapRadius: mapRadius,\n    mapOffsetY: mapOffsetY\n  };\n};\n\nvar latLonToCoord = function latLonToCoord(latLon, origin, extent) {\n  var _mapValues = mapValues(extent),\n      mapRadius = _mapValues.mapRadius,\n      mapOffsetY = _mapValues.mapOffsetY;\n\n  var x = Math.round((latLon[1] - MAP_LON_LEFT) * extent[0] / MAP_LON_DELTA);\n  var latitudeRad = latLon[0] * Math.PI / 180;\n  var y = extent[1] + mapOffsetY - Math.round(mapRadius / 2 * Math.log((1 + Math.sin(latitudeRad)) / (1 - Math.sin(latitudeRad))));\n  return [x, y]; // the coordinate value of this point on the map image\n};\n\nvar coordToLatLon = function coordToLatLon(coord, origin, extent) {\n  var _mapValues2 = mapValues(extent),\n      mapRadius = _mapValues2.mapRadius,\n      mapOffsetY = _mapValues2.mapOffsetY;\n\n  var a = (extent[1] + mapOffsetY - coord[1]) / mapRadius;\n  var lat = 180 / Math.PI * (2 * Math.atan(Math.exp(a)) - Math.PI / 2);\n  var lon = coord[0] * MAP_LON_DELTA / extent[0] + MAP_LON_LEFT;\n  return [lat, lon];\n};\n\nvar buildContinent = function buildContinent(_ref) {\n  var area = _ref.area,\n      dots = _ref.dots,\n      name = _ref.name,\n      origin = _ref.origin;\n  var extent = [].concat(origin);\n  var stateDots = dots.map(function (segment) {\n    var count = segment[2];\n    var spots = [];\n\n    for (var i = 0; i < count; i += 1) {\n      spots.push('h0');\n    }\n\n    var dotCommands = spots.join(' m10,0 ');\n    var x = FACTOR * (origin[0] + segment[0] + 1);\n    var y = FACTOR * (origin[1] + segment[1] + 1);\n    extent = maxCoordinate(extent, [origin[0] + segment[0] + segment[2], origin[1] + segment[1]]);\n    return \"M\" + x + \",\" + y + \" \" + dotCommands;\n  }).join(' ');\n  var stateArea = area.map(function (point, index) {\n    var x = FACTOR * (point[0] + origin[0] + 1);\n    var y = FACTOR * (point[1] + origin[1] + 1);\n    return \"\" + (index === 0 ? 'M' : 'L') + x + \",\" + y;\n  }).join(' ') + \" Z\";\n  var mid = [origin[0] + (extent[0] - origin[0]) / 2, origin[1] + (extent[1] - origin[1]) / 2];\n  return {\n    area: stateArea,\n    dots: stateDots,\n    name: name,\n    origin: origin,\n    extent: extent,\n    mid: mid\n  };\n};\n\nvar buildWorld = function buildWorld() {\n  // Build the SVG paths describing the individual dots\n  var continents = CONTINENTS.map(buildContinent);\n  var origin = [0, 0];\n  var extent = [0, 0];\n  continents.forEach(function (continent) {\n    extent = maxCoordinate(extent, continent.extent);\n  });\n  return {\n    continents: continents,\n    extent: extent,\n    origin: origin,\n    x: origin[0] * FACTOR,\n    y: origin[1] * FACTOR,\n    width: (extent[0] - origin[0] + 1) * FACTOR,\n    height: (extent[1] - origin[1] + 2) * FACTOR\n  };\n};\n\nvar buildInteractiveProps = function buildInteractiveProps(_ref2, activeFunc, active) {\n  var name = _ref2.name,\n      onClick = _ref2.onClick,\n      onHover = _ref2.onHover;\n  return {\n    role: 'button',\n    'aria-label': name,\n    tabIndex: '0',\n    onClick: onClick ? function () {\n      return onClick(name);\n    } : undefined,\n    onMouseOver: function onMouseOver() {\n      if (!active) {\n        activeFunc(name);\n\n        if (onHover) {\n          onHover(true);\n        }\n      }\n    },\n    onMouseLeave: function onMouseLeave() {\n      if (active) {\n        activeFunc(undefined);\n\n        if (onHover) {\n          onHover(false);\n        }\n      }\n    },\n    onFocus: function onFocus() {\n      // This moves the map unnecessarily. Instead, we should check\n      // the position and scroll if it isn't already visible\n      // this._worldMapRef.scrollIntoView();\n      if (!active) {\n        activeFunc(name);\n      }\n    },\n    onBlur: function onBlur() {\n      if (active) {\n        activeFunc(undefined);\n      }\n    }\n  };\n};\n\nvar WorldMap = /*#__PURE__*/forwardRef(function (_ref3, ref) {\n  var fill = _ref3.fill,\n      color = _ref3.color,\n      continentsProp = _ref3.continents,\n      hoverColor = _ref3.hoverColor,\n      onSelectPlace = _ref3.onSelectPlace,\n      placesProp = _ref3.places,\n      rest = _objectWithoutPropertiesLoose(_ref3, [\"fill\", \"color\", \"continents\", \"hoverColor\", \"onSelectPlace\", \"places\"]);\n\n  var theme = React.useContext(ThemeContext);\n  var world = React.useMemo(buildWorld, []);\n\n  var _React$useState = React.useState({}),\n      continents = _React$useState[0],\n      setContinents = _React$useState[1];\n\n  React.useEffect(function () {\n    if (continentsProp) {\n      setContinents(continentsProp.reduce(function (obj, continent) {\n        // eslint-disable-next-line no-param-reassign\n        obj[continent.name] = continent;\n        return obj;\n      }, {}));\n    } else setContinents({});\n  }, [continentsProp]);\n\n  var _React$useState2 = React.useState([]),\n      places = _React$useState2[0],\n      setPlaces = _React$useState2[1];\n\n  React.useEffect(function () {\n    if (placesProp) {\n      setPlaces(placesProp.map(function (_ref4) {\n        var location = _ref4.location,\n            place = _objectWithoutPropertiesLoose(_ref4, [\"location\"]);\n\n        var coords = latLonToCoord(location, world.origin, world.extent);\n        return _extends({\n          coords: coords,\n          key: location.join(',')\n        }, place);\n      }));\n    } else setPlaces([]);\n  }, [placesProp, world]);\n\n  var _React$useState3 = React.useState(),\n      over = _React$useState3[0],\n      setOver = _React$useState3[1];\n\n  var _React$useState4 = React.useState(),\n      activeCoords = _React$useState4[0],\n      setActiveCoords = _React$useState4[1];\n\n  var _React$useState5 = React.useState(),\n      activeContinent = _React$useState5[0],\n      setActiveContinent = _React$useState5[1];\n\n  var _React$useState6 = React.useState(),\n      activePlace = _React$useState6[0],\n      setActivePlace = _React$useState6[1];\n\n  var containerRef = React.useRef();\n  var onMouseMove = React.useCallback(function (event) {\n    // determine the map coordinates for where the mouse is\n    // containerRef uses the group so we can handle aspect ratio scaling\n    var rect = containerRef.current.getBoundingClientRect(); // since the SVG viewBox might be scaled\n\n    var scale = rect.width / world.width;\n    var coords = [Math.round((event.clientX - rect.left) / scale / FACTOR), Math.round((event.clientY - rect.top) / scale / FACTOR)];\n    setActiveCoords(coords);\n  }, [world.width]);\n  var continentElements = world.continents.map(function (_ref5) {\n    var area = _ref5.area,\n        dots = _ref5.dots,\n        name = _ref5.name;\n\n    var _ref6 = continents[name] || {},\n        continentColor = _ref6.color,\n        onClick = _ref6.onClick,\n        onHover = _ref6.onHover;\n\n    var active = activeContinent && activeContinent === name;\n    var interactiveProps = {};\n\n    if (onClick || onHover) {\n      interactiveProps = buildInteractiveProps(continents[name], function (activate) {\n        return setActiveContinent(activate);\n      }, active);\n    }\n\n    return /*#__PURE__*/React.createElement(\"g\", _extends({\n      key: name\n    }, interactiveProps), /*#__PURE__*/React.createElement(\"path\", {\n      stroke: \"none\",\n      fill: \"#fff\",\n      fillOpacity: \"0.01\",\n      d: area\n    }), /*#__PURE__*/React.createElement(\"path\", {\n      d: dots,\n      strokeLinecap: \"round\",\n      strokeWidth: parseMetricToNum(theme.worldMap.continent[active ? 'active' : 'base']),\n      stroke: normalizeColor(continentColor || color || theme.worldMap.color, theme)\n    }));\n  });\n  var placeElements = places.map(function (place) {\n    var placeColor = place.color,\n        coords = place.coords,\n        key = place.key,\n        name = place.name,\n        onClick = place.onClick,\n        onHover = place.onHover,\n        restPlace = _objectWithoutPropertiesLoose(place, [\"color\", \"coords\", \"key\", \"name\", \"onClick\", \"onHover\"]);\n\n    var d = \"M\" + FACTOR * coords[0] + \", \" + FACTOR * coords[1] + \" h0\";\n    var active = activePlace && activePlace === name;\n    var interactiveProps = {};\n\n    if (onClick || onHover) {\n      interactiveProps = buildInteractiveProps(place, function (activate) {\n        return setActivePlace(activate);\n      }, active);\n    }\n\n    return /*#__PURE__*/React.createElement(\"path\", _extends({\n      key: key,\n      strokeLinecap: \"round\",\n      strokeWidth: parseMetricToNum(theme.worldMap.place[active ? 'active' : 'base']),\n      stroke: normalizeColor(placeColor || color || theme.worldMap.color, theme)\n    }, interactiveProps, restPlace, {\n      d: d\n    }));\n  }); // If the caller is interested in onSelectPlace changes, track where the\n\n  var interactiveProps = {};\n\n  if (onSelectPlace) {\n    interactiveProps = {\n      onMouseOver: function onMouseOver() {\n        return setOver(true);\n      },\n      onMouseMove: over ? onMouseMove : undefined,\n      onMouseLeave: function onMouseLeave() {\n        setOver(false);\n        setActiveCoords(undefined);\n      }\n    };\n  }\n\n  var active;\n\n  if (activeCoords) {\n    var d = \"M\" + FACTOR * activeCoords[0] + \", \" + FACTOR * activeCoords[1] + \" h0\";\n    active = /*#__PURE__*/React.createElement(\"g\", {\n      stroke: \"none\",\n      fill: \"none\",\n      fillRule: \"evenodd\",\n      onClick: function onClick() {\n        return onSelectPlace(coordToLatLon(activeCoords, world.origin, world.extent));\n      }\n    }, /*#__PURE__*/React.createElement(\"path\", {\n      strokeLinecap: \"round\",\n      strokeWidth: parseMetricToNum(theme.worldMap.place.active),\n      stroke: normalizeColor(hoverColor || color || theme.worldMap.hover.color, theme),\n      d: d\n    }));\n  }\n\n  return /*#__PURE__*/React.createElement(StyledWorldMap, _extends({\n    ref: ref,\n    viewBox: world.x + \" \" + world.y + \" \" + world.width + \" \" + world.height,\n    preserveAspectRatio: \"xMinYMin meet\",\n    fillProp: fill,\n    width: world.width,\n    height: world.height\n  }, interactiveProps, rest), /*#__PURE__*/React.createElement(\"g\", {\n    ref: containerRef,\n    stroke: \"none\",\n    fill: \"none\",\n    fillRule: \"evenodd\"\n  }, continentElements), placeElements, active); // }\n});\nWorldMap.displayName = 'WorldMap';\nWorldMap.defaultProps = {};\nObject.setPrototypeOf(WorldMap.defaultProps, defaultProps);\nvar WorldMapDoc;\n\nif (process.env.NODE_ENV !== 'production') {\n  // eslint-disable-next-line global-require\n  WorldMapDoc = require('./doc').doc(WorldMap);\n}\n\nvar WorldMapWrapper = WorldMapDoc || WorldMap;\nexport { WorldMapWrapper as WorldMap };","map":{"version":3,"sources":["/Users/jeffreynaef/go/src/github.com/n3wscott/sockeye/frontend/node_modules/grommet/es6/components/WorldMap/WorldMap.js"],"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","_objectWithoutPropertiesLoose","excluded","sourceKeys","keys","indexOf","React","forwardRef","ThemeContext","defaultProps","normalizeColor","parseMetricToNum","StyledWorldMap","CONTINENTS","name","origin","area","dots","FACTOR","maxCoordinate","a","b","Math","max","MAP_LAT_BOTTOM","MAP_LAT_BOTTOM_RAD","PI","MAP_LON_LEFT","MAP_LON_RIGHT","MAP_LON_DELTA","mapValues","extent","mapRadius","mapOffsetY","round","log","sin","latLonToCoord","latLon","_mapValues","x","latitudeRad","y","coordToLatLon","coord","_mapValues2","lat","atan","exp","lon","buildContinent","_ref","concat","stateDots","map","segment","count","spots","push","dotCommands","join","stateArea","point","index","mid","buildWorld","continents","forEach","continent","width","height","buildInteractiveProps","_ref2","activeFunc","active","onClick","onHover","role","tabIndex","undefined","onMouseOver","onMouseLeave","onFocus","onBlur","WorldMap","_ref3","ref","fill","color","continentsProp","hoverColor","onSelectPlace","placesProp","places","rest","theme","useContext","world","useMemo","_React$useState","useState","setContinents","useEffect","reduce","obj","_React$useState2","setPlaces","_ref4","location","place","coords","_React$useState3","over","setOver","_React$useState4","activeCoords","setActiveCoords","_React$useState5","activeContinent","setActiveContinent","_React$useState6","activePlace","setActivePlace","containerRef","useRef","onMouseMove","useCallback","event","rect","current","getBoundingClientRect","scale","clientX","left","clientY","top","continentElements","_ref5","_ref6","continentColor","interactiveProps","activate","createElement","stroke","fillOpacity","d","strokeLinecap","strokeWidth","worldMap","placeElements","placeColor","restPlace","fillRule","hover","viewBox","preserveAspectRatio","fillProp","displayName","setPrototypeOf","WorldMapDoc","process","env","NODE_ENV","require","doc","WorldMapWrapper"],"mappings":"AAAA,SAASA,QAAT,GAAoB;AAAEA,EAAAA,QAAQ,GAAGC,MAAM,CAACC,MAAP,IAAiB,UAAUC,MAAV,EAAkB;AAAE,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGC,SAAS,CAACC,MAA9B,EAAsCF,CAAC,EAAvC,EAA2C;AAAE,UAAIG,MAAM,GAAGF,SAAS,CAACD,CAAD,CAAtB;;AAA2B,WAAK,IAAII,GAAT,IAAgBD,MAAhB,EAAwB;AAAE,YAAIN,MAAM,CAACQ,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCJ,MAArC,EAA6CC,GAA7C,CAAJ,EAAuD;AAAEL,UAAAA,MAAM,CAACK,GAAD,CAAN,GAAcD,MAAM,CAACC,GAAD,CAApB;AAA4B;AAAE;AAAE;;AAAC,WAAOL,MAAP;AAAgB,GAA5P;;AAA8P,SAAOH,QAAQ,CAACY,KAAT,CAAe,IAAf,EAAqBP,SAArB,CAAP;AAAyC;;AAE7T,SAASQ,6BAAT,CAAuCN,MAAvC,EAA+CO,QAA/C,EAAyD;AAAE,MAAIP,MAAM,IAAI,IAAd,EAAoB,OAAO,EAAP;AAAW,MAAIJ,MAAM,GAAG,EAAb;AAAiB,MAAIY,UAAU,GAAGd,MAAM,CAACe,IAAP,CAAYT,MAAZ,CAAjB;AAAsC,MAAIC,GAAJ,EAASJ,CAAT;;AAAY,OAAKA,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGW,UAAU,CAACT,MAA3B,EAAmCF,CAAC,EAApC,EAAwC;AAAEI,IAAAA,GAAG,GAAGO,UAAU,CAACX,CAAD,CAAhB;AAAqB,QAAIU,QAAQ,CAACG,OAAT,CAAiBT,GAAjB,KAAyB,CAA7B,EAAgC;AAAUL,IAAAA,MAAM,CAACK,GAAD,CAAN,GAAcD,MAAM,CAACC,GAAD,CAApB;AAA4B;;AAAC,SAAOL,MAAP;AAAgB;;AAEnT,OAAOe,KAAP,IAAgBC,UAAhB,QAAkC,OAAlC;AACA,SAASC,YAAT,QAA6B,mBAA7B;AACA,SAASC,YAAT,QAA6B,qBAA7B;AACA,SAASC,cAAT,EAAyBC,gBAAzB,QAAiD,aAAjD;AACA,SAASC,cAAT,QAA+B,kBAA/B,C,CAAmD;AACnD;AACA;AACA;AACA;;AAEA,IAAIC,UAAU,GAAG,CAAC;AAChBC,EAAAA,IAAI,EAAE,WADU;AAEhBC,EAAAA,MAAM,EAAE,CAAC,EAAD,EAAK,EAAL,CAFQ;AAGhBC,EAAAA,IAAI,EAAE,CAAC,CAAC,CAAD,EAAI,CAAJ,CAAD,EAAS,CAAC,CAAD,EAAI,CAAJ,CAAT,EAAiB,CAAC,EAAD,EAAK,CAAL,CAAjB,EAA0B,CAAC,EAAD,EAAK,CAAL,CAA1B,EAAmC,CAAC,CAAD,EAAI,CAAJ,CAAnC,EAA2C,CAAC,CAAD,EAAI,CAAJ,CAA3C,CAHU;AAIhBC,EAAAA,IAAI,EAAE,CAAC,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAAD,EAAY,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAAZ,EAAuB,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAAvB,EAAkC,CAAC,CAAD,EAAI,CAAJ,EAAO,EAAP,CAAlC,EAA8C,CAAC,CAAD,EAAI,CAAJ,EAAO,EAAP,CAA9C,EAA0D,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAA1D,EAAqE,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAArE,EAAgF,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAAhF,EAA2F,CAAC,EAAD,EAAK,CAAL,EAAQ,CAAR,CAA3F,EAAuG,CAAC,EAAD,EAAK,CAAL,EAAQ,CAAR,CAAvG,EAAmH,CAAC,EAAD,EAAK,CAAL,EAAQ,CAAR,CAAnH;AAJU,CAAD,EAKd;AACDH,EAAAA,IAAI,EAAE,MADL;AAEDC,EAAAA,MAAM,EAAE,CAAC,EAAD,EAAK,CAAL,CAFP;AAGDC,EAAAA,IAAI,EAAE,CAAC,CAAC,EAAD,EAAK,CAAL,CAAD,EAAU,CAAC,EAAD,EAAK,CAAL,CAAV,EAAmB,CAAC,EAAD,EAAK,CAAL,CAAnB,EAA4B,CAAC,EAAD,EAAK,EAAL,CAA5B,EAAsC,CAAC,EAAD,EAAK,EAAL,CAAtC,EAAgD,CAAC,EAAD,EAAK,EAAL,CAAhD,EAA0D,CAAC,EAAD,EAAK,EAAL,CAA1D,EAAoE,CAAC,EAAD,EAAK,EAAL,CAApE,EAA8E,CAAC,CAAD,EAAI,EAAJ,CAA9E,EAAuF,CAAC,CAAD,EAAI,EAAJ,CAAvF,EAAgG,CAAC,CAAD,EAAI,EAAJ,CAAhG,EAAyG,CAAC,CAAD,EAAI,EAAJ,CAAzG,EAAkH,CAAC,CAAD,EAAI,CAAJ,CAAlH,CAHL;AAIDC,EAAAA,IAAI,EAAE,CAAC,CAAC,EAAD,EAAK,CAAL,EAAQ,CAAR,CAAD,EAAa,CAAC,EAAD,EAAK,CAAL,EAAQ,CAAR,CAAb,EAAyB,CAAC,EAAD,EAAK,CAAL,EAAQ,CAAR,CAAzB,EAAqC,CAAC,EAAD,EAAK,CAAL,EAAQ,CAAR,CAArC,EAAiD,CAAC,EAAD,EAAK,CAAL,EAAQ,CAAR,CAAjD,EAA6D,CAAC,EAAD,EAAK,CAAL,EAAQ,CAAR,CAA7D,EAAyE,CAAC,EAAD,EAAK,CAAL,EAAQ,CAAR,CAAzE,EAAqF,CAAC,EAAD,EAAK,CAAL,EAAQ,EAAR,CAArF,EAAkG,CAAC,EAAD,EAAK,CAAL,EAAQ,CAAR,CAAlG,EAA8G,CAAC,CAAD,EAAI,CAAJ,EAAO,EAAP,CAA9G,EAA0H,CAAC,EAAD,EAAK,CAAL,EAAQ,CAAR,CAA1H,EAAsI,CAAC,EAAD,EAAK,CAAL,EAAQ,CAAR,CAAtI,EAAkJ,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAAlJ,EAA6J,CAAC,EAAD,EAAK,CAAL,EAAQ,CAAR,CAA7J,EAAyK,CAAC,EAAD,EAAK,CAAL,EAAQ,EAAR,CAAzK,EAAsL,CAAC,CAAD,EAAI,CAAJ,EAAO,EAAP,CAAtL,EAAkM,CAAC,CAAD,EAAI,CAAJ,EAAO,EAAP,CAAlM,EAA8M,CAAC,CAAD,EAAI,CAAJ,EAAO,EAAP,CAA9M,EAA0N,CAAC,EAAD,EAAK,CAAL,EAAQ,CAAR,CAA1N,EAAsO,CAAC,CAAD,EAAI,EAAJ,EAAQ,EAAR,CAAtO,EAAmP,CAAC,EAAD,EAAK,EAAL,EAAS,CAAT,CAAnP,EAAgQ,CAAC,EAAD,EAAK,EAAL,EAAS,CAAT,CAAhQ,EAA6Q,CAAC,CAAD,EAAI,EAAJ,EAAQ,EAAR,CAA7Q,EAA0R,CAAC,EAAD,EAAK,EAAL,EAAS,CAAT,CAA1R,EAAuS,CAAC,CAAD,EAAI,EAAJ,EAAQ,EAAR,CAAvS,EAAoT,CAAC,EAAD,EAAK,EAAL,EAAS,CAAT,CAApT,EAAiU,CAAC,CAAD,EAAI,EAAJ,EAAQ,EAAR,CAAjU,EAA8U,CAAC,EAAD,EAAK,EAAL,EAAS,CAAT,CAA9U,EAA2V,CAAC,CAAD,EAAI,EAAJ,EAAQ,EAAR,CAA3V,EAAwW,CAAC,CAAD,EAAI,EAAJ,EAAQ,EAAR,CAAxW,EAAqX,CAAC,CAAD,EAAI,EAAJ,EAAQ,CAAR,CAArX,EAAiY,CAAC,CAAD,EAAI,EAAJ,EAAQ,EAAR,CAAjY,EAA8Y,CAAC,CAAD,EAAI,EAAJ,EAAQ,CAAR,CAA9Y,EAA0Z,CAAC,CAAD,EAAI,EAAJ,EAAQ,EAAR,CAA1Z,EAAua,CAAC,EAAD,EAAK,EAAL,EAAS,CAAT,CAAva,EAAob,CAAC,EAAD,EAAK,EAAL,EAAS,CAAT,CAApb,EAAic,CAAC,CAAD,EAAI,EAAJ,EAAQ,EAAR,CAAjc,EAA8c,CAAC,EAAD,EAAK,EAAL,EAAS,CAAT,CAA9c,EAA2d,CAAC,CAAD,EAAI,EAAJ,EAAQ,EAAR,CAA3d,EAAwe,CAAC,CAAD,EAAI,EAAJ,EAAQ,CAAR,CAAxe,EAAof,CAAC,CAAD,EAAI,EAAJ,EAAQ,EAAR,CAApf,EAAigB,CAAC,CAAD,EAAI,EAAJ,EAAQ,CAAR,CAAjgB,EAA6gB,CAAC,EAAD,EAAK,EAAL,EAAS,EAAT,CAA7gB,EAA2hB,CAAC,CAAD,EAAI,EAAJ,EAAQ,CAAR,CAA3hB,EAAuiB,CAAC,EAAD,EAAK,EAAL,EAAS,CAAT,CAAviB,EAAojB,CAAC,EAAD,EAAK,EAAL,EAAS,CAAT,CAApjB,EAAikB,CAAC,CAAD,EAAI,EAAJ,EAAQ,CAAR,CAAjkB,EAA6kB,CAAC,EAAD,EAAK,EAAL,EAAS,CAAT,CAA7kB,EAA0lB,CAAC,EAAD,EAAK,EAAL,EAAS,CAAT,CAA1lB,EAAumB,CAAC,EAAD,EAAK,EAAL,EAAS,CAAT,CAAvmB,EAAonB,CAAC,EAAD,EAAK,EAAL,EAAS,CAAT,CAApnB,EAAioB,CAAC,EAAD,EAAK,EAAL,EAAS,CAAT,CAAjoB,EAA8oB,CAAC,EAAD,EAAK,EAAL,EAAS,CAAT,CAA9oB,EAA2pB,CAAC,EAAD,EAAK,EAAL,EAAS,CAAT,CAA3pB,EAAwqB,CAAC,EAAD,EAAK,EAAL,EAAS,CAAT,CAAxqB,EAAqrB,CAAC,EAAD,EAAK,EAAL,EAAS,CAAT,CAArrB,EAAksB,CAAC,EAAD,EAAK,EAAL,EAAS,CAAT,CAAlsB,EAA+sB,CAAC,EAAD,EAAK,EAAL,EAAS,CAAT,CAA/sB,EAA4tB,CAAC,EAAD,EAAK,EAAL,EAAS,CAAT,CAA5tB,EAAyuB,CAAC,EAAD,EAAK,EAAL,EAAS,CAAT,CAAzuB,EAAsvB,CAAC,EAAD,EAAK,EAAL,EAAS,CAAT,CAAtvB,EAAmwB,CAAC,EAAD,EAAK,EAAL,EAAS,CAAT,CAAnwB,EAAgxB,CAAC,EAAD,EAAK,EAAL,EAAS,CAAT,CAAhxB,EAA6xB,CAAC,EAAD,EAAK,EAAL,EAAS,CAAT,CAA7xB;AAJL,CALc,EAUd;AACD;AACAH,EAAAA,IAAI,EAAE,QAFL;AAGDC,EAAAA,MAAM,EAAE,CAAC,EAAD,EAAK,EAAL,CAHP;AAIDC,EAAAA,IAAI,EAAE,CAAC,CAAC,CAAD,EAAI,CAAJ,CAAD,EAAS,CAAC,CAAD,EAAI,CAAJ,CAAT,EAAiB,CAAC,EAAD,EAAK,CAAL,CAAjB,EAA0B,CAAC,EAAD,EAAK,CAAL,CAA1B,EAAmC,CAAC,EAAD,EAAK,EAAL,CAAnC,EAA6C,CAAC,EAAD,EAAK,EAAL,CAA7C,EAAuD,CAAC,CAAD,EAAI,EAAJ,CAAvD,EAAgE,CAAC,CAAD,EAAI,CAAJ,CAAhE,EAAwE,CAAC,CAAD,EAAI,CAAJ,CAAxE,CAJL;AAKDC,EAAAA,IAAI,EAAE,CAAC,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAAD,EAAY,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAAZ,EAAuB,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAAvB,EAAkC,CAAC,CAAD,EAAI,CAAJ,EAAO,EAAP,CAAlC,EAA8C,CAAC,CAAD,EAAI,CAAJ,EAAO,EAAP,CAA9C,EAA0D,CAAC,CAAD,EAAI,CAAJ,EAAO,EAAP,CAA1D,EAAsE,CAAC,CAAD,EAAI,CAAJ,EAAO,EAAP,CAAtE,EAAkF,CAAC,CAAD,EAAI,CAAJ,EAAO,EAAP,CAAlF,EAA8F,CAAC,CAAD,EAAI,CAAJ,EAAO,EAAP,CAA9F,EAA0G,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAA1G,EAAqH,CAAC,CAAD,EAAI,CAAJ,EAAO,EAAP,CAArH,EAAiI,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAAjI,EAA4I,CAAC,CAAD,EAAI,EAAJ,EAAQ,CAAR,CAA5I,EAAwJ,CAAC,CAAD,EAAI,EAAJ,EAAQ,CAAR,CAAxJ,EAAoK,CAAC,CAAD,EAAI,EAAJ,EAAQ,CAAR,CAApK,EAAgL,CAAC,CAAD,EAAI,EAAJ,EAAQ,CAAR,CAAhL,EAA4L,CAAC,CAAD,EAAI,EAAJ,EAAQ,CAAR,CAA5L,EAAwM,CAAC,EAAD,EAAK,EAAL,EAAS,CAAT,CAAxM,EAAqN,CAAC,CAAD,EAAI,EAAJ,EAAQ,CAAR,CAArN,EAAiO,CAAC,EAAD,EAAK,EAAL,EAAS,CAAT,CAAjO,EAA8O,CAAC,CAAD,EAAI,EAAJ,EAAQ,CAAR,CAA9O,EAA0P,CAAC,CAAD,EAAI,EAAJ,EAAQ,CAAR,CAA1P,EAAsQ,CAAC,CAAD,EAAI,EAAJ,EAAQ,CAAR,CAAtQ;AALL,CAVc,EAgBd;AACDH,EAAAA,IAAI,EAAE,QADL;AAEDC,EAAAA,MAAM,EAAE,CAAC,EAAD,EAAK,CAAL,CAFP;AAGDC,EAAAA,IAAI,EAAE,CAAC,CAAC,CAAD,EAAI,CAAJ,CAAD,EAAS,CAAC,EAAD,EAAK,CAAL,CAAT,EAAkB,CAAC,EAAD,EAAK,CAAL,CAAlB,EAA2B,CAAC,EAAD,EAAK,EAAL,CAA3B,EAAqC,CAAC,EAAD,EAAK,EAAL,CAArC,EAA+C,CAAC,EAAD,EAAK,EAAL,CAA/C,EAAyD,CAAC,CAAD,EAAI,EAAJ,CAAzD,EAAkE,CAAC,CAAD,EAAI,CAAJ,CAAlE,CAHL;AAIDC,EAAAA,IAAI,EAAE,CAAC,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAAD,EAAY,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAAZ,EAAuB,CAAC,EAAD,EAAK,CAAL,EAAQ,CAAR,CAAvB,EAAmC,CAAC,EAAD,EAAK,CAAL,EAAQ,CAAR,CAAnC,EAA+C,CAAC,EAAD,EAAK,CAAL,EAAQ,CAAR,CAA/C,EAA2D,CAAC,EAAD,EAAK,CAAL,EAAQ,CAAR,CAA3D,EAAuE,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAAvE,EAAkF,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAAlF,EAA6F,CAAC,EAAD,EAAK,CAAL,EAAQ,CAAR,CAA7F,EAAyG,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAAzG,EAAoH,CAAC,CAAD,EAAI,CAAJ,EAAO,EAAP,CAApH,EAAgI,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAAhI,EAA2I,CAAC,EAAD,EAAK,CAAL,EAAQ,CAAR,CAA3I,EAAuJ,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAAvJ,EAAkK,CAAC,EAAD,EAAK,CAAL,EAAQ,CAAR,CAAlK,EAA8K,CAAC,CAAD,EAAI,EAAJ,EAAQ,CAAR,CAA9K,EAA0L,CAAC,CAAD,EAAI,EAAJ,EAAQ,CAAR,CAA1L,EAAsM,CAAC,CAAD,EAAI,EAAJ,EAAQ,CAAR,CAAtM,EAAkN,CAAC,EAAD,EAAK,EAAL,EAAS,CAAT,CAAlN,EAA+N,CAAC,CAAD,EAAI,EAAJ,EAAQ,CAAR,CAA/N,EAA2O,CAAC,CAAD,EAAI,EAAJ,EAAQ,EAAR,CAA3O,EAAwP,CAAC,CAAD,EAAI,EAAJ,EAAQ,CAAR,CAAxP,EAAoQ,CAAC,CAAD,EAAI,EAAJ,EAAQ,EAAR,CAApQ,EAAiR,CAAC,CAAD,EAAI,EAAJ,EAAQ,EAAR,CAAjR,EAA8R,CAAC,CAAD,EAAI,EAAJ,EAAQ,CAAR,CAA9R,EAA0S,CAAC,CAAD,EAAI,EAAJ,EAAQ,CAAR,CAA1S,EAAsT,CAAC,EAAD,EAAK,EAAL,EAAS,CAAT,CAAtT,EAAmU,CAAC,CAAD,EAAI,EAAJ,EAAQ,CAAR,CAAnU,EAA+U,CAAC,CAAD,EAAI,EAAJ,EAAQ,CAAR,CAA/U,EAA2V,CAAC,EAAD,EAAK,EAAL,EAAS,CAAT,CAA3V,EAAwW,CAAC,CAAD,EAAI,EAAJ,EAAQ,CAAR,CAAxW,EAAoX,CAAC,CAAD,EAAI,EAAJ,EAAQ,CAAR,CAApX,EAAgY,CAAC,EAAD,EAAK,EAAL,EAAS,CAAT,CAAhY;AAJL,CAhBc,EAqBd;AACDH,EAAAA,IAAI,EAAE,eADL;AAEDC,EAAAA,MAAM,EAAE,CAAC,EAAD,EAAK,EAAL,CAFP;AAGDC,EAAAA,IAAI,EAAE,CAAC,CAAC,CAAD,EAAI,CAAJ,CAAD,EAAS,CAAC,CAAD,EAAI,CAAJ,CAAT,EAAiB,CAAC,EAAD,EAAK,CAAL,CAAjB,EAA0B,CAAC,EAAD,EAAK,CAAL,CAA1B,EAAmC,CAAC,CAAD,EAAI,EAAJ,CAAnC,EAA4C,CAAC,CAAD,EAAI,EAAJ,CAA5C,EAAqD,CAAC,CAAD,EAAI,CAAJ,CAArD,EAA6D,CAAC,CAAD,EAAI,CAAJ,CAA7D,CAHL;AAIDC,EAAAA,IAAI,EAAE,CAAC,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAAD,EAAY,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAAZ,EAAuB,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAAvB,EAAkC,CAAC,CAAD,EAAI,CAAJ,EAAO,EAAP,CAAlC,EAA8C,CAAC,CAAD,EAAI,CAAJ,EAAO,EAAP,CAA9C,EAA0D,CAAC,CAAD,EAAI,CAAJ,EAAO,EAAP,CAA1D,EAAsE,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAAtE,EAAiF,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAAjF,EAA4F,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAA5F,EAAuG,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAAvG,EAAkH,CAAC,CAAD,EAAI,EAAJ,EAAQ,CAAR,CAAlH,EAA8H,CAAC,CAAD,EAAI,EAAJ,EAAQ,CAAR,CAA9H,EAA0I,CAAC,CAAD,EAAI,EAAJ,EAAQ,CAAR,CAA1I,EAAsJ,CAAC,CAAD,EAAI,EAAJ,EAAQ,CAAR,CAAtJ,EAAkK,CAAC,CAAD,EAAI,EAAJ,EAAQ,CAAR,CAAlK,EAA8K,CAAC,CAAD,EAAI,EAAJ,EAAQ,CAAR,CAA9K,EAA0L,CAAC,CAAD,EAAI,EAAJ,EAAQ,CAAR,CAA1L,EAAsM,CAAC,CAAD,EAAI,EAAJ,EAAQ,CAAR,CAAtM,EAAkN,CAAC,CAAD,EAAI,EAAJ,EAAQ,CAAR,CAAlN;AAJL,CArBc,EA0Bd;AACDH,EAAAA,IAAI,EAAE,eADL;AAEDC,EAAAA,MAAM,EAAE,CAAC,CAAD,EAAI,CAAJ,CAFP;AAGDC,EAAAA,IAAI,EAAE,CAAC,CAAC,EAAD,EAAK,CAAL,CAAD,EAAU,CAAC,EAAD,EAAK,CAAL,CAAV,EAAmB,CAAC,EAAD,EAAK,CAAL,CAAnB,EAA4B,CAAC,EAAD,EAAK,EAAL,CAA5B,EAAsC,CAAC,EAAD,EAAK,EAAL,CAAtC,EAAgD,CAAC,CAAD,EAAI,EAAJ,CAAhD,EAAyD,CAAC,CAAD,EAAI,CAAJ,CAAzD,CAHL;AAIDC,EAAAA,IAAI,EAAE,CAAC,CAAC,EAAD,EAAK,CAAL,EAAQ,CAAR,CAAD,EAAa,CAAC,EAAD,EAAK,CAAL,EAAQ,CAAR,CAAb,EAAyB,CAAC,EAAD,EAAK,CAAL,EAAQ,CAAR,CAAzB,EAAqC,CAAC,EAAD,EAAK,CAAL,EAAQ,CAAR,CAArC,EAAiD,CAAC,EAAD,EAAK,CAAL,EAAQ,CAAR,CAAjD,EAA6D,CAAC,EAAD,EAAK,CAAL,EAAQ,CAAR,CAA7D,EAAyE,CAAC,EAAD,EAAK,CAAL,EAAQ,CAAR,CAAzE,EAAqF,CAAC,EAAD,EAAK,CAAL,EAAQ,EAAR,CAArF,EAAkG,CAAC,EAAD,EAAK,CAAL,EAAQ,CAAR,CAAlG,EAA8G,CAAC,EAAD,EAAK,CAAL,EAAQ,CAAR,CAA9G,EAA0H,CAAC,EAAD,EAAK,CAAL,EAAQ,EAAR,CAA1H,EAAuI,CAAC,EAAD,EAAK,CAAL,EAAQ,CAAR,CAAvI,EAAmJ,CAAC,EAAD,EAAK,CAAL,EAAQ,CAAR,CAAnJ,EAA+J,CAAC,EAAD,EAAK,CAAL,EAAQ,CAAR,CAA/J,EAA2K,CAAC,EAAD,EAAK,CAAL,EAAQ,EAAR,CAA3K,EAAwL,CAAC,EAAD,EAAK,CAAL,EAAQ,CAAR,CAAxL,EAAoM,CAAC,EAAD,EAAK,CAAL,EAAQ,CAAR,CAApM,EAAgN,CAAC,EAAD,EAAK,CAAL,EAAQ,CAAR,CAAhN,EAA4N,CAAC,EAAD,EAAK,CAAL,EAAQ,EAAR,CAA5N,EAAyO,CAAC,EAAD,EAAK,CAAL,EAAQ,CAAR,CAAzO,EAAqP,CAAC,EAAD,EAAK,CAAL,EAAQ,CAAR,CAArP,EAAiQ,CAAC,EAAD,EAAK,CAAL,EAAQ,CAAR,CAAjQ,EAA6Q,CAAC,EAAD,EAAK,CAAL,EAAQ,CAAR,CAA7Q,EAAyR,CAAC,EAAD,EAAK,CAAL,EAAQ,CAAR,CAAzR,EAAqS,CAAC,EAAD,EAAK,CAAL,EAAQ,CAAR,CAArS,EAAiT,CAAC,EAAD,EAAK,CAAL,EAAQ,CAAR,CAAjT,EAA6T,CAAC,EAAD,EAAK,CAAL,EAAQ,CAAR,CAA7T,EAAyU,CAAC,EAAD,EAAK,CAAL,EAAQ,CAAR,CAAzU,EAAqV,CAAC,EAAD,EAAK,CAAL,EAAQ,CAAR,CAArV,EAAiW,CAAC,CAAD,EAAI,CAAJ,EAAO,EAAP,CAAjW,EAA6W,CAAC,EAAD,EAAK,CAAL,EAAQ,CAAR,CAA7W,EAAyX,CAAC,EAAD,EAAK,CAAL,EAAQ,CAAR,CAAzX,EAAqY,CAAC,EAAD,EAAK,CAAL,EAAQ,CAAR,CAArY,EAAiZ,CAAC,EAAD,EAAK,CAAL,EAAQ,CAAR,CAAjZ,EAA6Z,CAAC,CAAD,EAAI,CAAJ,EAAO,EAAP,CAA7Z,EAAya,CAAC,EAAD,EAAK,CAAL,EAAQ,CAAR,CAAza,EAAqb,CAAC,EAAD,EAAK,CAAL,EAAQ,CAAR,CAArb,EAAic,CAAC,CAAD,EAAI,CAAJ,EAAO,EAAP,CAAjc,EAA6c,CAAC,EAAD,EAAK,CAAL,EAAQ,CAAR,CAA7c,EAAyd,CAAC,EAAD,EAAK,CAAL,EAAQ,CAAR,CAAzd,EAAqe,CAAC,CAAD,EAAI,EAAJ,EAAQ,EAAR,CAAre,EAAkf,CAAC,EAAD,EAAK,EAAL,EAAS,CAAT,CAAlf,EAA+f,CAAC,EAAD,EAAK,EAAL,EAAS,CAAT,CAA/f,EAA4gB,CAAC,CAAD,EAAI,EAAJ,EAAQ,CAAR,CAA5gB,EAAwhB,CAAC,CAAD,EAAI,EAAJ,EAAQ,EAAR,CAAxhB,EAAqiB,CAAC,EAAD,EAAK,EAAL,EAAS,CAAT,CAAriB,EAAkjB,CAAC,EAAD,EAAK,EAAL,EAAS,CAAT,CAAljB,EAA+jB,CAAC,CAAD,EAAI,EAAJ,EAAQ,CAAR,CAA/jB,EAA2kB,CAAC,CAAD,EAAI,EAAJ,EAAQ,EAAR,CAA3kB,EAAwlB,CAAC,EAAD,EAAK,EAAL,EAAS,CAAT,CAAxlB,EAAqmB,CAAC,EAAD,EAAK,EAAL,EAAS,EAAT,CAArmB,EAAmnB,CAAC,EAAD,EAAK,EAAL,EAAS,CAAT,CAAnnB,EAAgoB,CAAC,EAAD,EAAK,EAAL,EAAS,EAAT,CAAhoB,EAA8oB,CAAC,EAAD,EAAK,EAAL,EAAS,CAAT,CAA9oB,EAA2pB,CAAC,EAAD,EAAK,EAAL,EAAS,CAAT,CAA3pB,EAAwqB,CAAC,EAAD,EAAK,EAAL,EAAS,CAAT,CAAxqB,EAAqrB,CAAC,EAAD,EAAK,EAAL,EAAS,EAAT,CAArrB,EAAmsB,CAAC,EAAD,EAAK,EAAL,EAAS,CAAT,CAAnsB,EAAgtB,CAAC,EAAD,EAAK,EAAL,EAAS,EAAT,CAAhtB,EAA8tB,CAAC,EAAD,EAAK,EAAL,EAAS,EAAT,CAA9tB,EAA4uB,CAAC,EAAD,EAAK,EAAL,EAAS,EAAT,CAA5uB,EAA0vB,CAAC,EAAD,EAAK,EAAL,EAAS,CAAT,CAA1vB,EAAuwB,CAAC,EAAD,EAAK,EAAL,EAAS,CAAT,CAAvwB,EAAoxB,CAAC,EAAD,EAAK,EAAL,EAAS,CAAT,CAApxB,EAAiyB,CAAC,EAAD,EAAK,EAAL,EAAS,CAAT,CAAjyB,EAA8yB,CAAC,EAAD,EAAK,EAAL,EAAS,CAAT,CAA9yB,EAA2zB,CAAC,EAAD,EAAK,EAAL,EAAS,CAAT,CAA3zB,EAAw0B,CAAC,EAAD,EAAK,EAAL,EAAS,CAAT,CAAx0B,EAAq1B,CAAC,EAAD,EAAK,EAAL,EAAS,CAAT,CAAr1B,EAAk2B,CAAC,EAAD,EAAK,EAAL,EAAS,CAAT,CAAl2B,EAA+2B,CAAC,EAAD,EAAK,EAAL,EAAS,CAAT,CAA/2B;AAJL,CA1Bc,CAAjB,C,CA+BI;;AAEJ,IAAIC,MAAM,GAAG,EAAb;;AAEA,IAAIC,aAAa,GAAG,SAASA,aAAT,CAAuBC,CAAvB,EAA0BC,CAA1B,EAA6B;AAC/C,SAAO,CAACC,IAAI,CAACC,GAAL,CAASH,CAAC,CAAC,CAAD,CAAV,EAAeC,CAAC,CAAC,CAAD,CAAhB,CAAD,EAAuBC,IAAI,CAACC,GAAL,CAASH,CAAC,CAAC,CAAD,CAAV,EAAeC,CAAC,CAAC,CAAD,CAAhB,CAAvB,CAAP;AACD,CAFD,C,CAEG;AACH;AACA;;;AAGA,IAAIG,cAAc,GAAG,CAAC,IAAtB,C,CAA4B;;AAE5B,IAAIC,kBAAkB,GAAGD,cAAc,GAAGF,IAAI,CAACI,EAAtB,GAA2B,GAApD;AACA,IAAIC,YAAY,GAAG,CAAC,KAApB,C,CAA2B;;AAE3B,IAAIC,aAAa,GAAG,KAApB,C,CAA2B;;AAE3B,IAAIC,aAAa,GAAGD,aAAa,GAAGD,YAApC;;AAEA,IAAIG,SAAS,GAAG,SAASA,SAAT,CAAmBC,MAAnB,EAA2B;AACzC,MAAIC,SAAS,GAAGD,MAAM,CAAC,CAAD,CAAN,GAAYF,aAAZ,GAA4B,GAA5B,IAAmC,IAAIP,IAAI,CAACI,EAA5C,CAAhB;AACA,MAAIO,UAAU,GAAGX,IAAI,CAACY,KAAL,CAAWF,SAAS,GAAG,CAAZ,GAAgBV,IAAI,CAACa,GAAL,CAAS,CAAC,IAAIb,IAAI,CAACc,GAAL,CAASX,kBAAT,CAAL,KAAsC,IAAIH,IAAI,CAACc,GAAL,CAASX,kBAAT,CAA1C,CAAT,CAA3B,CAAjB;AACA,SAAO;AACLO,IAAAA,SAAS,EAAEA,SADN;AAELC,IAAAA,UAAU,EAAEA;AAFP,GAAP;AAID,CAPD;;AASA,IAAII,aAAa,GAAG,SAASA,aAAT,CAAuBC,MAAvB,EAA+BvB,MAA/B,EAAuCgB,MAAvC,EAA+C;AACjE,MAAIQ,UAAU,GAAGT,SAAS,CAACC,MAAD,CAA1B;AAAA,MACIC,SAAS,GAAGO,UAAU,CAACP,SAD3B;AAAA,MAEIC,UAAU,GAAGM,UAAU,CAACN,UAF5B;;AAIA,MAAIO,CAAC,GAAGlB,IAAI,CAACY,KAAL,CAAW,CAACI,MAAM,CAAC,CAAD,CAAN,GAAYX,YAAb,IAA6BI,MAAM,CAAC,CAAD,CAAnC,GAAyCF,aAApD,CAAR;AACA,MAAIY,WAAW,GAAGH,MAAM,CAAC,CAAD,CAAN,GAAYhB,IAAI,CAACI,EAAjB,GAAsB,GAAxC;AACA,MAAIgB,CAAC,GAAGX,MAAM,CAAC,CAAD,CAAN,GAAYE,UAAZ,GAAyBX,IAAI,CAACY,KAAL,CAAWF,SAAS,GAAG,CAAZ,GAAgBV,IAAI,CAACa,GAAL,CAAS,CAAC,IAAIb,IAAI,CAACc,GAAL,CAASK,WAAT,CAAL,KAA+B,IAAInB,IAAI,CAACc,GAAL,CAASK,WAAT,CAAnC,CAAT,CAA3B,CAAjC;AACA,SAAO,CAACD,CAAD,EAAIE,CAAJ,CAAP,CARiE,CAQlD;AAChB,CATD;;AAWA,IAAIC,aAAa,GAAG,SAASA,aAAT,CAAuBC,KAAvB,EAA8B7B,MAA9B,EAAsCgB,MAAtC,EAA8C;AAChE,MAAIc,WAAW,GAAGf,SAAS,CAACC,MAAD,CAA3B;AAAA,MACIC,SAAS,GAAGa,WAAW,CAACb,SAD5B;AAAA,MAEIC,UAAU,GAAGY,WAAW,CAACZ,UAF7B;;AAIA,MAAIb,CAAC,GAAG,CAACW,MAAM,CAAC,CAAD,CAAN,GAAYE,UAAZ,GAAyBW,KAAK,CAAC,CAAD,CAA/B,IAAsCZ,SAA9C;AACA,MAAIc,GAAG,GAAG,MAAMxB,IAAI,CAACI,EAAX,IAAiB,IAAIJ,IAAI,CAACyB,IAAL,CAAUzB,IAAI,CAAC0B,GAAL,CAAS5B,CAAT,CAAV,CAAJ,GAA6BE,IAAI,CAACI,EAAL,GAAU,CAAxD,CAAV;AACA,MAAIuB,GAAG,GAAGL,KAAK,CAAC,CAAD,CAAL,GAAWf,aAAX,GAA2BE,MAAM,CAAC,CAAD,CAAjC,GAAuCJ,YAAjD;AACA,SAAO,CAACmB,GAAD,EAAMG,GAAN,CAAP;AACD,CATD;;AAWA,IAAIC,cAAc,GAAG,SAASA,cAAT,CAAwBC,IAAxB,EAA8B;AACjD,MAAInC,IAAI,GAAGmC,IAAI,CAACnC,IAAhB;AAAA,MACIC,IAAI,GAAGkC,IAAI,CAAClC,IADhB;AAAA,MAEIH,IAAI,GAAGqC,IAAI,CAACrC,IAFhB;AAAA,MAGIC,MAAM,GAAGoC,IAAI,CAACpC,MAHlB;AAIA,MAAIgB,MAAM,GAAG,GAAGqB,MAAH,CAAUrC,MAAV,CAAb;AACA,MAAIsC,SAAS,GAAGpC,IAAI,CAACqC,GAAL,CAAS,UAAUC,OAAV,EAAmB;AAC1C,QAAIC,KAAK,GAAGD,OAAO,CAAC,CAAD,CAAnB;AACA,QAAIE,KAAK,GAAG,EAAZ;;AAEA,SAAK,IAAIjE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGgE,KAApB,EAA2BhE,CAAC,IAAI,CAAhC,EAAmC;AACjCiE,MAAAA,KAAK,CAACC,IAAN,CAAW,IAAX;AACD;;AAED,QAAIC,WAAW,GAAGF,KAAK,CAACG,IAAN,CAAW,SAAX,CAAlB;AACA,QAAIpB,CAAC,GAAGtB,MAAM,IAAIH,MAAM,CAAC,CAAD,CAAN,GAAYwC,OAAO,CAAC,CAAD,CAAnB,GAAyB,CAA7B,CAAd;AACA,QAAIb,CAAC,GAAGxB,MAAM,IAAIH,MAAM,CAAC,CAAD,CAAN,GAAYwC,OAAO,CAAC,CAAD,CAAnB,GAAyB,CAA7B,CAAd;AACAxB,IAAAA,MAAM,GAAGZ,aAAa,CAACY,MAAD,EAAS,CAAChB,MAAM,CAAC,CAAD,CAAN,GAAYwC,OAAO,CAAC,CAAD,CAAnB,GAAyBA,OAAO,CAAC,CAAD,CAAjC,EAAsCxC,MAAM,CAAC,CAAD,CAAN,GAAYwC,OAAO,CAAC,CAAD,CAAzD,CAAT,CAAtB;AACA,WAAO,MAAMf,CAAN,GAAU,GAAV,GAAgBE,CAAhB,GAAoB,GAApB,GAA0BiB,WAAjC;AACD,GAbe,EAabC,IAba,CAaR,GAbQ,CAAhB;AAcA,MAAIC,SAAS,GAAG7C,IAAI,CAACsC,GAAL,CAAS,UAAUQ,KAAV,EAAiBC,KAAjB,EAAwB;AAC/C,QAAIvB,CAAC,GAAGtB,MAAM,IAAI4C,KAAK,CAAC,CAAD,CAAL,GAAW/C,MAAM,CAAC,CAAD,CAAjB,GAAuB,CAA3B,CAAd;AACA,QAAI2B,CAAC,GAAGxB,MAAM,IAAI4C,KAAK,CAAC,CAAD,CAAL,GAAW/C,MAAM,CAAC,CAAD,CAAjB,GAAuB,CAA3B,CAAd;AACA,WAAO,MAAMgD,KAAK,KAAK,CAAV,GAAc,GAAd,GAAoB,GAA1B,IAAiCvB,CAAjC,GAAqC,GAArC,GAA2CE,CAAlD;AACD,GAJe,EAIbkB,IAJa,CAIR,GAJQ,IAID,IAJf;AAKA,MAAII,GAAG,GAAG,CAACjD,MAAM,CAAC,CAAD,CAAN,GAAY,CAACgB,MAAM,CAAC,CAAD,CAAN,GAAYhB,MAAM,CAAC,CAAD,CAAnB,IAA0B,CAAvC,EAA0CA,MAAM,CAAC,CAAD,CAAN,GAAY,CAACgB,MAAM,CAAC,CAAD,CAAN,GAAYhB,MAAM,CAAC,CAAD,CAAnB,IAA0B,CAAhF,CAAV;AACA,SAAO;AACLC,IAAAA,IAAI,EAAE6C,SADD;AAEL5C,IAAAA,IAAI,EAAEoC,SAFD;AAGLvC,IAAAA,IAAI,EAAEA,IAHD;AAILC,IAAAA,MAAM,EAAEA,MAJH;AAKLgB,IAAAA,MAAM,EAAEA,MALH;AAMLiC,IAAAA,GAAG,EAAEA;AANA,GAAP;AAQD,CAlCD;;AAoCA,IAAIC,UAAU,GAAG,SAASA,UAAT,GAAsB;AACrC;AACA,MAAIC,UAAU,GAAGrD,UAAU,CAACyC,GAAX,CAAeJ,cAAf,CAAjB;AACA,MAAInC,MAAM,GAAG,CAAC,CAAD,EAAI,CAAJ,CAAb;AACA,MAAIgB,MAAM,GAAG,CAAC,CAAD,EAAI,CAAJ,CAAb;AACAmC,EAAAA,UAAU,CAACC,OAAX,CAAmB,UAAUC,SAAV,EAAqB;AACtCrC,IAAAA,MAAM,GAAGZ,aAAa,CAACY,MAAD,EAASqC,SAAS,CAACrC,MAAnB,CAAtB;AACD,GAFD;AAGA,SAAO;AACLmC,IAAAA,UAAU,EAAEA,UADP;AAELnC,IAAAA,MAAM,EAAEA,MAFH;AAGLhB,IAAAA,MAAM,EAAEA,MAHH;AAILyB,IAAAA,CAAC,EAAEzB,MAAM,CAAC,CAAD,CAAN,GAAYG,MAJV;AAKLwB,IAAAA,CAAC,EAAE3B,MAAM,CAAC,CAAD,CAAN,GAAYG,MALV;AAMLmD,IAAAA,KAAK,EAAE,CAACtC,MAAM,CAAC,CAAD,CAAN,GAAYhB,MAAM,CAAC,CAAD,CAAlB,GAAwB,CAAzB,IAA8BG,MANhC;AAOLoD,IAAAA,MAAM,EAAE,CAACvC,MAAM,CAAC,CAAD,CAAN,GAAYhB,MAAM,CAAC,CAAD,CAAlB,GAAwB,CAAzB,IAA8BG;AAPjC,GAAP;AASD,CAjBD;;AAmBA,IAAIqD,qBAAqB,GAAG,SAASA,qBAAT,CAA+BC,KAA/B,EAAsCC,UAAtC,EAAkDC,MAAlD,EAA0D;AACpF,MAAI5D,IAAI,GAAG0D,KAAK,CAAC1D,IAAjB;AAAA,MACI6D,OAAO,GAAGH,KAAK,CAACG,OADpB;AAAA,MAEIC,OAAO,GAAGJ,KAAK,CAACI,OAFpB;AAGA,SAAO;AACLC,IAAAA,IAAI,EAAE,QADD;AAEL,kBAAc/D,IAFT;AAGLgE,IAAAA,QAAQ,EAAE,GAHL;AAILH,IAAAA,OAAO,EAAEA,OAAO,GAAG,YAAY;AAC7B,aAAOA,OAAO,CAAC7D,IAAD,CAAd;AACD,KAFe,GAEZiE,SANC;AAOLC,IAAAA,WAAW,EAAE,SAASA,WAAT,GAAuB;AAClC,UAAI,CAACN,MAAL,EAAa;AACXD,QAAAA,UAAU,CAAC3D,IAAD,CAAV;;AAEA,YAAI8D,OAAJ,EAAa;AACXA,UAAAA,OAAO,CAAC,IAAD,CAAP;AACD;AACF;AACF,KAfI;AAgBLK,IAAAA,YAAY,EAAE,SAASA,YAAT,GAAwB;AACpC,UAAIP,MAAJ,EAAY;AACVD,QAAAA,UAAU,CAACM,SAAD,CAAV;;AAEA,YAAIH,OAAJ,EAAa;AACXA,UAAAA,OAAO,CAAC,KAAD,CAAP;AACD;AACF;AACF,KAxBI;AAyBLM,IAAAA,OAAO,EAAE,SAASA,OAAT,GAAmB;AAC1B;AACA;AACA;AACA,UAAI,CAACR,MAAL,EAAa;AACXD,QAAAA,UAAU,CAAC3D,IAAD,CAAV;AACD;AACF,KAhCI;AAiCLqE,IAAAA,MAAM,EAAE,SAASA,MAAT,GAAkB;AACxB,UAAIT,MAAJ,EAAY;AACVD,QAAAA,UAAU,CAACM,SAAD,CAAV;AACD;AACF;AArCI,GAAP;AAuCD,CA3CD;;AA6CA,IAAIK,QAAQ,GAAG,aAAa7E,UAAU,CAAC,UAAU8E,KAAV,EAAiBC,GAAjB,EAAsB;AAC3D,MAAIC,IAAI,GAAGF,KAAK,CAACE,IAAjB;AAAA,MACIC,KAAK,GAAGH,KAAK,CAACG,KADlB;AAAA,MAEIC,cAAc,GAAGJ,KAAK,CAACnB,UAF3B;AAAA,MAGIwB,UAAU,GAAGL,KAAK,CAACK,UAHvB;AAAA,MAIIC,aAAa,GAAGN,KAAK,CAACM,aAJ1B;AAAA,MAKIC,UAAU,GAAGP,KAAK,CAACQ,MALvB;AAAA,MAMIC,IAAI,GAAG7F,6BAA6B,CAACoF,KAAD,EAAQ,CAAC,MAAD,EAAS,OAAT,EAAkB,YAAlB,EAAgC,YAAhC,EAA8C,eAA9C,EAA+D,QAA/D,CAAR,CANxC;;AAQA,MAAIU,KAAK,GAAGzF,KAAK,CAAC0F,UAAN,CAAiBxF,YAAjB,CAAZ;AACA,MAAIyF,KAAK,GAAG3F,KAAK,CAAC4F,OAAN,CAAcjC,UAAd,EAA0B,EAA1B,CAAZ;;AAEA,MAAIkC,eAAe,GAAG7F,KAAK,CAAC8F,QAAN,CAAe,EAAf,CAAtB;AAAA,MACIlC,UAAU,GAAGiC,eAAe,CAAC,CAAD,CADhC;AAAA,MAEIE,aAAa,GAAGF,eAAe,CAAC,CAAD,CAFnC;;AAIA7F,EAAAA,KAAK,CAACgG,SAAN,CAAgB,YAAY;AAC1B,QAAIb,cAAJ,EAAoB;AAClBY,MAAAA,aAAa,CAACZ,cAAc,CAACc,MAAf,CAAsB,UAAUC,GAAV,EAAepC,SAAf,EAA0B;AAC5D;AACAoC,QAAAA,GAAG,CAACpC,SAAS,CAACtD,IAAX,CAAH,GAAsBsD,SAAtB;AACA,eAAOoC,GAAP;AACD,OAJa,EAIX,EAJW,CAAD,CAAb;AAKD,KAND,MAMOH,aAAa,CAAC,EAAD,CAAb;AACR,GARD,EAQG,CAACZ,cAAD,CARH;;AAUA,MAAIgB,gBAAgB,GAAGnG,KAAK,CAAC8F,QAAN,CAAe,EAAf,CAAvB;AAAA,MACIP,MAAM,GAAGY,gBAAgB,CAAC,CAAD,CAD7B;AAAA,MAEIC,SAAS,GAAGD,gBAAgB,CAAC,CAAD,CAFhC;;AAIAnG,EAAAA,KAAK,CAACgG,SAAN,CAAgB,YAAY;AAC1B,QAAIV,UAAJ,EAAgB;AACdc,MAAAA,SAAS,CAACd,UAAU,CAACtC,GAAX,CAAe,UAAUqD,KAAV,EAAiB;AACxC,YAAIC,QAAQ,GAAGD,KAAK,CAACC,QAArB;AAAA,YACIC,KAAK,GAAG5G,6BAA6B,CAAC0G,KAAD,EAAQ,CAAC,UAAD,CAAR,CADzC;;AAGA,YAAIG,MAAM,GAAGzE,aAAa,CAACuE,QAAD,EAAWX,KAAK,CAAClF,MAAjB,EAAyBkF,KAAK,CAAClE,MAA/B,CAA1B;AACA,eAAO3C,QAAQ,CAAC;AACd0H,UAAAA,MAAM,EAAEA,MADM;AAEdlH,UAAAA,GAAG,EAAEgH,QAAQ,CAAChD,IAAT,CAAc,GAAd;AAFS,SAAD,EAGZiD,KAHY,CAAf;AAID,OATS,CAAD,CAAT;AAUD,KAXD,MAWOH,SAAS,CAAC,EAAD,CAAT;AACR,GAbD,EAaG,CAACd,UAAD,EAAaK,KAAb,CAbH;;AAeA,MAAIc,gBAAgB,GAAGzG,KAAK,CAAC8F,QAAN,EAAvB;AAAA,MACIY,IAAI,GAAGD,gBAAgB,CAAC,CAAD,CAD3B;AAAA,MAEIE,OAAO,GAAGF,gBAAgB,CAAC,CAAD,CAF9B;;AAIA,MAAIG,gBAAgB,GAAG5G,KAAK,CAAC8F,QAAN,EAAvB;AAAA,MACIe,YAAY,GAAGD,gBAAgB,CAAC,CAAD,CADnC;AAAA,MAEIE,eAAe,GAAGF,gBAAgB,CAAC,CAAD,CAFtC;;AAIA,MAAIG,gBAAgB,GAAG/G,KAAK,CAAC8F,QAAN,EAAvB;AAAA,MACIkB,eAAe,GAAGD,gBAAgB,CAAC,CAAD,CADtC;AAAA,MAEIE,kBAAkB,GAAGF,gBAAgB,CAAC,CAAD,CAFzC;;AAIA,MAAIG,gBAAgB,GAAGlH,KAAK,CAAC8F,QAAN,EAAvB;AAAA,MACIqB,WAAW,GAAGD,gBAAgB,CAAC,CAAD,CADlC;AAAA,MAEIE,cAAc,GAAGF,gBAAgB,CAAC,CAAD,CAFrC;;AAIA,MAAIG,YAAY,GAAGrH,KAAK,CAACsH,MAAN,EAAnB;AACA,MAAIC,WAAW,GAAGvH,KAAK,CAACwH,WAAN,CAAkB,UAAUC,KAAV,EAAiB;AACnD;AACA;AACA,QAAIC,IAAI,GAAGL,YAAY,CAACM,OAAb,CAAqBC,qBAArB,EAAX,CAHmD,CAGM;;AAEzD,QAAIC,KAAK,GAAGH,IAAI,CAAC3D,KAAL,GAAa4B,KAAK,CAAC5B,KAA/B;AACA,QAAIyC,MAAM,GAAG,CAACxF,IAAI,CAACY,KAAL,CAAW,CAAC6F,KAAK,CAACK,OAAN,GAAgBJ,IAAI,CAACK,IAAtB,IAA8BF,KAA9B,GAAsCjH,MAAjD,CAAD,EAA2DI,IAAI,CAACY,KAAL,CAAW,CAAC6F,KAAK,CAACO,OAAN,GAAgBN,IAAI,CAACO,GAAtB,IAA6BJ,KAA7B,GAAqCjH,MAAhD,CAA3D,CAAb;AACAkG,IAAAA,eAAe,CAACN,MAAD,CAAf;AACD,GARiB,EAQf,CAACb,KAAK,CAAC5B,KAAP,CARe,CAAlB;AASA,MAAImE,iBAAiB,GAAGvC,KAAK,CAAC/B,UAAN,CAAiBZ,GAAjB,CAAqB,UAAUmF,KAAV,EAAiB;AAC5D,QAAIzH,IAAI,GAAGyH,KAAK,CAACzH,IAAjB;AAAA,QACIC,IAAI,GAAGwH,KAAK,CAACxH,IADjB;AAAA,QAEIH,IAAI,GAAG2H,KAAK,CAAC3H,IAFjB;;AAIA,QAAI4H,KAAK,GAAGxE,UAAU,CAACpD,IAAD,CAAV,IAAoB,EAAhC;AAAA,QACI6H,cAAc,GAAGD,KAAK,CAAClD,KAD3B;AAAA,QAEIb,OAAO,GAAG+D,KAAK,CAAC/D,OAFpB;AAAA,QAGIC,OAAO,GAAG8D,KAAK,CAAC9D,OAHpB;;AAKA,QAAIF,MAAM,GAAG4C,eAAe,IAAIA,eAAe,KAAKxG,IAApD;AACA,QAAI8H,gBAAgB,GAAG,EAAvB;;AAEA,QAAIjE,OAAO,IAAIC,OAAf,EAAwB;AACtBgE,MAAAA,gBAAgB,GAAGrE,qBAAqB,CAACL,UAAU,CAACpD,IAAD,CAAX,EAAmB,UAAU+H,QAAV,EAAoB;AAC7E,eAAOtB,kBAAkB,CAACsB,QAAD,CAAzB;AACD,OAFuC,EAErCnE,MAFqC,CAAxC;AAGD;;AAED,WAAO,aAAapE,KAAK,CAACwI,aAAN,CAAoB,GAApB,EAAyB1J,QAAQ,CAAC;AACpDQ,MAAAA,GAAG,EAAEkB;AAD+C,KAAD,EAElD8H,gBAFkD,CAAjC,EAEE,aAAatI,KAAK,CAACwI,aAAN,CAAoB,MAApB,EAA4B;AAC7DC,MAAAA,MAAM,EAAE,MADqD;AAE7DxD,MAAAA,IAAI,EAAE,MAFuD;AAG7DyD,MAAAA,WAAW,EAAE,MAHgD;AAI7DC,MAAAA,CAAC,EAAEjI;AAJ0D,KAA5B,CAFf,EAOhB,aAAaV,KAAK,CAACwI,aAAN,CAAoB,MAApB,EAA4B;AAC3CG,MAAAA,CAAC,EAAEhI,IADwC;AAE3CiI,MAAAA,aAAa,EAAE,OAF4B;AAG3CC,MAAAA,WAAW,EAAExI,gBAAgB,CAACoF,KAAK,CAACqD,QAAN,CAAehF,SAAf,CAAyBM,MAAM,GAAG,QAAH,GAAc,MAA7C,CAAD,CAHc;AAI3CqE,MAAAA,MAAM,EAAErI,cAAc,CAACiI,cAAc,IAAInD,KAAlB,IAA2BO,KAAK,CAACqD,QAAN,CAAe5D,KAA3C,EAAkDO,KAAlD;AAJqB,KAA5B,CAPG,CAApB;AAaD,GAhCuB,CAAxB;AAiCA,MAAIsD,aAAa,GAAGxD,MAAM,CAACvC,GAAP,CAAW,UAAUuD,KAAV,EAAiB;AAC9C,QAAIyC,UAAU,GAAGzC,KAAK,CAACrB,KAAvB;AAAA,QACIsB,MAAM,GAAGD,KAAK,CAACC,MADnB;AAAA,QAEIlH,GAAG,GAAGiH,KAAK,CAACjH,GAFhB;AAAA,QAGIkB,IAAI,GAAG+F,KAAK,CAAC/F,IAHjB;AAAA,QAII6D,OAAO,GAAGkC,KAAK,CAAClC,OAJpB;AAAA,QAKIC,OAAO,GAAGiC,KAAK,CAACjC,OALpB;AAAA,QAMI2E,SAAS,GAAGtJ,6BAA6B,CAAC4G,KAAD,EAAQ,CAAC,OAAD,EAAU,QAAV,EAAoB,KAApB,EAA2B,MAA3B,EAAmC,SAAnC,EAA8C,SAA9C,CAAR,CAN7C;;AAQA,QAAIoC,CAAC,GAAG,MAAM/H,MAAM,GAAG4F,MAAM,CAAC,CAAD,CAArB,GAA2B,IAA3B,GAAkC5F,MAAM,GAAG4F,MAAM,CAAC,CAAD,CAAjD,GAAuD,KAA/D;AACA,QAAIpC,MAAM,GAAG+C,WAAW,IAAIA,WAAW,KAAK3G,IAA5C;AACA,QAAI8H,gBAAgB,GAAG,EAAvB;;AAEA,QAAIjE,OAAO,IAAIC,OAAf,EAAwB;AACtBgE,MAAAA,gBAAgB,GAAGrE,qBAAqB,CAACsC,KAAD,EAAQ,UAAUgC,QAAV,EAAoB;AAClE,eAAOnB,cAAc,CAACmB,QAAD,CAArB;AACD,OAFuC,EAErCnE,MAFqC,CAAxC;AAGD;;AAED,WAAO,aAAapE,KAAK,CAACwI,aAAN,CAAoB,MAApB,EAA4B1J,QAAQ,CAAC;AACvDQ,MAAAA,GAAG,EAAEA,GADkD;AAEvDsJ,MAAAA,aAAa,EAAE,OAFwC;AAGvDC,MAAAA,WAAW,EAAExI,gBAAgB,CAACoF,KAAK,CAACqD,QAAN,CAAevC,KAAf,CAAqBnC,MAAM,GAAG,QAAH,GAAc,MAAzC,CAAD,CAH0B;AAIvDqE,MAAAA,MAAM,EAAErI,cAAc,CAAC4I,UAAU,IAAI9D,KAAd,IAAuBO,KAAK,CAACqD,QAAN,CAAe5D,KAAvC,EAA8CO,KAA9C;AAJiC,KAAD,EAKrD6C,gBALqD,EAKnCW,SALmC,EAKxB;AAC9BN,MAAAA,CAAC,EAAEA;AAD2B,KALwB,CAApC,CAApB;AAQD,GA3BmB,CAApB,CAxG2D,CAmIvD;;AAEJ,MAAIL,gBAAgB,GAAG,EAAvB;;AAEA,MAAIjD,aAAJ,EAAmB;AACjBiD,IAAAA,gBAAgB,GAAG;AACjB5D,MAAAA,WAAW,EAAE,SAASA,WAAT,GAAuB;AAClC,eAAOiC,OAAO,CAAC,IAAD,CAAd;AACD,OAHgB;AAIjBY,MAAAA,WAAW,EAAEb,IAAI,GAAGa,WAAH,GAAiB9C,SAJjB;AAKjBE,MAAAA,YAAY,EAAE,SAASA,YAAT,GAAwB;AACpCgC,QAAAA,OAAO,CAAC,KAAD,CAAP;AACAG,QAAAA,eAAe,CAACrC,SAAD,CAAf;AACD;AARgB,KAAnB;AAUD;;AAED,MAAIL,MAAJ;;AAEA,MAAIyC,YAAJ,EAAkB;AAChB,QAAI8B,CAAC,GAAG,MAAM/H,MAAM,GAAGiG,YAAY,CAAC,CAAD,CAA3B,GAAiC,IAAjC,GAAwCjG,MAAM,GAAGiG,YAAY,CAAC,CAAD,CAA7D,GAAmE,KAA3E;AACAzC,IAAAA,MAAM,GAAG,aAAapE,KAAK,CAACwI,aAAN,CAAoB,GAApB,EAAyB;AAC7CC,MAAAA,MAAM,EAAE,MADqC;AAE7CxD,MAAAA,IAAI,EAAE,MAFuC;AAG7CiE,MAAAA,QAAQ,EAAE,SAHmC;AAI7C7E,MAAAA,OAAO,EAAE,SAASA,OAAT,GAAmB;AAC1B,eAAOgB,aAAa,CAAChD,aAAa,CAACwE,YAAD,EAAelB,KAAK,CAAClF,MAArB,EAA6BkF,KAAK,CAAClE,MAAnC,CAAd,CAApB;AACD;AAN4C,KAAzB,EAOnB,aAAazB,KAAK,CAACwI,aAAN,CAAoB,MAApB,EAA4B;AAC1CI,MAAAA,aAAa,EAAE,OAD2B;AAE1CC,MAAAA,WAAW,EAAExI,gBAAgB,CAACoF,KAAK,CAACqD,QAAN,CAAevC,KAAf,CAAqBnC,MAAtB,CAFa;AAG1CqE,MAAAA,MAAM,EAAErI,cAAc,CAACgF,UAAU,IAAIF,KAAd,IAAuBO,KAAK,CAACqD,QAAN,CAAeK,KAAf,CAAqBjE,KAA7C,EAAoDO,KAApD,CAHoB;AAI1CkD,MAAAA,CAAC,EAAEA;AAJuC,KAA5B,CAPM,CAAtB;AAaD;;AAED,SAAO,aAAa3I,KAAK,CAACwI,aAAN,CAAoBlI,cAApB,EAAoCxB,QAAQ,CAAC;AAC/DkG,IAAAA,GAAG,EAAEA,GAD0D;AAE/DoE,IAAAA,OAAO,EAAEzD,KAAK,CAACzD,CAAN,GAAU,GAAV,GAAgByD,KAAK,CAACvD,CAAtB,GAA0B,GAA1B,GAAgCuD,KAAK,CAAC5B,KAAtC,GAA8C,GAA9C,GAAoD4B,KAAK,CAAC3B,MAFJ;AAG/DqF,IAAAA,mBAAmB,EAAE,eAH0C;AAI/DC,IAAAA,QAAQ,EAAErE,IAJqD;AAK/DlB,IAAAA,KAAK,EAAE4B,KAAK,CAAC5B,KALkD;AAM/DC,IAAAA,MAAM,EAAE2B,KAAK,CAAC3B;AANiD,GAAD,EAO7DsE,gBAP6D,EAO3C9C,IAP2C,CAA5C,EAOQ,aAAaxF,KAAK,CAACwI,aAAN,CAAoB,GAApB,EAAyB;AAChExD,IAAAA,GAAG,EAAEqC,YAD2D;AAEhEoB,IAAAA,MAAM,EAAE,MAFwD;AAGhExD,IAAAA,IAAI,EAAE,MAH0D;AAIhEiE,IAAAA,QAAQ,EAAE;AAJsD,GAAzB,EAKtChB,iBALsC,CAPrB,EAYGa,aAZH,EAYkB3E,MAZlB,CAApB,CAvK2D,CAmLZ;AAChD,CApLqC,CAAtC;AAqLAU,QAAQ,CAACyE,WAAT,GAAuB,UAAvB;AACAzE,QAAQ,CAAC3E,YAAT,GAAwB,EAAxB;AACApB,MAAM,CAACyK,cAAP,CAAsB1E,QAAQ,CAAC3E,YAA/B,EAA6CA,YAA7C;AACA,IAAIsJ,WAAJ;;AAEA,IAAIC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAA7B,EAA2C;AACzC;AACAH,EAAAA,WAAW,GAAGI,OAAO,CAAC,OAAD,CAAP,CAAiBC,GAAjB,CAAqBhF,QAArB,CAAd;AACD;;AAED,IAAIiF,eAAe,GAAGN,WAAW,IAAI3E,QAArC;AACA,SAASiF,eAAe,IAAIjF,QAA5B","sourcesContent":["function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React, { forwardRef } from 'react';\nimport { ThemeContext } from 'styled-components';\nimport { defaultProps } from '../../default-props';\nimport { normalizeColor, parseMetricToNum } from '../../utils';\nimport { StyledWorldMap } from './StyledWorldMap'; // The graphic is drawn as a rectangular grid using coordinates spaced\n// by FACTOR pixels. The contents have both an area boundary for interaction\n// and dots described as rows where each row is described by three values:\n// a starting coordinate and a length. This approach is more efficient than\n// describing it via SVG elements, keeping the code/library size smaller.\n\nvar CONTINENTS = [{\n  name: 'Australia',\n  origin: [74, 32],\n  area: [[4, 0], [7, 1], [15, 7], [13, 9], [0, 6], [0, 2]],\n  dots: [[4, 0, 1], [2, 1, 6], [0, 2, 9], [0, 3, 10], [0, 4, 10], [0, 5, 3], [5, 5, 5], [5, 6, 4], [15, 7, 1], [14, 8, 1], [13, 9, 1]]\n}, {\n  name: 'Asia',\n  origin: [52, 1],\n  area: [[16, 0], [38, 5], [40, 7], [28, 17], [24, 25], [29, 29], [19, 29], [11, 24], [3, 23], [0, 20], [0, 19], [6, 13], [7, 6]],\n  dots: [[16, 0, 1], [17, 1, 2], [18, 2, 2], [15, 3, 6], [28, 3, 1], [30, 3, 1], [10, 4, 2], [13, 4, 10], [24, 4, 1], [9, 5, 22], [32, 5, 1], [38, 5, 1], [7, 6, 2], [10, 6, 1], [12, 6, 27], [7, 7, 34], [7, 8, 31], [7, 9, 26], [34, 9, 3], [7, 10, 22], [31, 10, 1], [33, 10, 1], [7, 11, 21], [32, 11, 2], [7, 12, 21], [32, 12, 1], [6, 13, 22], [32, 13, 1], [6, 14, 22], [5, 15, 22], [3, 16, 2], [6, 16, 20], [2, 17, 3], [6, 17, 16], [24, 17, 1], [28, 17, 1], [1, 18, 22], [26, 18, 2], [0, 19, 24], [0, 20, 5], [6, 20, 17], [2, 21, 5], [10, 21, 14], [2, 22, 5], [11, 22, 4], [16, 22, 4], [3, 23, 3], [11, 23, 2], [17, 23, 3], [23, 23, 1], [11, 24, 2], [18, 24, 2], [23, 24, 1], [24, 25, 1], [18, 26, 1], [22, 26, 1], [18, 27, 1], [20, 27, 4], [18, 28, 1], [21, 28, 1], [23, 28, 1], [26, 28, 3], [19, 29, 1], [28, 29, 2]]\n}, {\n  // 21X, 40Y\n  name: 'Africa',\n  origin: [40, 19],\n  area: [[3, 0], [6, 0], [11, 2], [16, 7], [16, 15], [11, 18], [9, 18], [0, 6], [0, 3]],\n  dots: [[3, 0, 4], [2, 1, 6], [9, 1, 2], [1, 2, 11], [0, 3, 13], [0, 4, 14], [0, 5, 14], [0, 6, 16], [1, 7, 16], [2, 8, 2], [6, 8, 11], [7, 9, 9], [7, 10, 8], [7, 11, 7], [8, 12, 7], [7, 13, 8], [7, 14, 7], [16, 14, 1], [8, 15, 5], [15, 15, 2], [8, 16, 5], [9, 17, 3], [9, 18, 3]]\n}, {\n  name: 'Europe',\n  origin: [39, 2],\n  area: [[8, 0], [10, 0], [20, 2], [19, 11], [18, 13], [14, 16], [3, 16], [0, 7]],\n  dots: [[8, 0, 3], [9, 1, 1], [20, 2, 1], [19, 3, 1], [12, 4, 1], [19, 4, 1], [9, 5, 6], [9, 6, 7], [17, 6, 3], [0, 7, 1], [8, 7, 12], [7, 8, 3], [11, 8, 9], [7, 9, 3], [11, 9, 9], [4, 10, 1], [7, 10, 1], [9, 10, 1], [11, 10, 9], [3, 11, 2], [7, 11, 13], [4, 12, 1], [6, 12, 13], [4, 13, 15], [5, 14, 3], [9, 14, 4], [15, 14, 2], [3, 15, 3], [8, 15, 1], [10, 15, 5], [6, 15, 2], [3, 16, 2], [10, 16, 5]]\n}, {\n  name: 'South America',\n  origin: [22, 26],\n  area: [[2, 0], [5, 0], [11, 4], [11, 8], [3, 18], [2, 17], [0, 4], [0, 3]],\n  dots: [[2, 0, 4], [1, 1, 7], [1, 2, 7], [0, 3, 10], [0, 4, 12], [1, 5, 11], [2, 6, 9], [3, 7, 8], [3, 8, 8], [3, 9, 6], [3, 10, 6], [3, 11, 5], [3, 12, 3], [2, 13, 3], [2, 14, 3], [2, 15, 2], [2, 16, 2], [2, 17, 2], [3, 18, 1]]\n}, {\n  name: 'North America',\n  origin: [0, 0],\n  area: [[21, 0], [39, 0], [39, 6], [22, 26], [16, 23], [2, 12], [0, 7]],\n  dots: [[22, 0, 6], [29, 0, 1], [31, 0, 1], [33, 0, 5], [20, 1, 1], [22, 1, 1], [24, 1, 2], [27, 1, 13], [17, 2, 1], [20, 2, 5], [26, 2, 13], [13, 3, 1], [19, 3, 1], [21, 3, 3], [26, 3, 14], [14, 4, 1], [16, 4, 4], [21, 4, 3], [29, 4, 11], [12, 5, 3], [16, 5, 1], [18, 5, 1], [20, 5, 3], [24, 5, 1], [30, 5, 8], [14, 6, 3], [19, 6, 1], [22, 6, 4], [31, 6, 8], [0, 7, 15], [16, 7, 1], [18, 7, 4], [24, 7, 2], [30, 7, 7], [2, 8, 20], [24, 8, 3], [29, 8, 5], [2, 9, 20], [24, 9, 2], [30, 9, 3], [1, 10, 18], [23, 10, 2], [31, 10, 1], [2, 11, 2], [8, 11, 11], [23, 11, 2], [26, 11, 1], [2, 12, 1], [8, 12, 13], [24, 12, 3], [10, 13, 12], [23, 13, 5], [11, 14, 17], [11, 15, 9], [21, 15, 6], [28, 15, 2], [11, 16, 11], [23, 16, 4], [11, 17, 14], [12, 18, 11], [12, 19, 12], [13, 20, 9], [15, 21, 3], [22, 21, 1], [16, 22, 2], [16, 23, 2], [20, 23, 1], [23, 23, 1], [18, 24, 3], [21, 25, 1], [22, 26, 1]]\n}]; // FACTOR is the distance in pixels between coordinates\n\nvar FACTOR = 10;\n\nvar maxCoordinate = function maxCoordinate(a, b) {\n  return [Math.max(a[0], b[0]), Math.max(a[1], b[1])];\n}; // const minCoordinate = (a, b) =>\n//   [Math.min(a[0], b[0]), Math.min(a[1], b[1])];\n// Based on https://stackoverflow.com/a/43861247\n\n\nvar MAP_LAT_BOTTOM = -50.0; // empirically determined\n\nvar MAP_LAT_BOTTOM_RAD = MAP_LAT_BOTTOM * Math.PI / 180;\nvar MAP_LON_LEFT = -171.0; // empirically determined\n\nvar MAP_LON_RIGHT = 184.0; // empirically determined\n\nvar MAP_LON_DELTA = MAP_LON_RIGHT - MAP_LON_LEFT;\n\nvar mapValues = function mapValues(extent) {\n  var mapRadius = extent[0] / MAP_LON_DELTA * 360 / (2 * Math.PI);\n  var mapOffsetY = Math.round(mapRadius / 2 * Math.log((1 + Math.sin(MAP_LAT_BOTTOM_RAD)) / (1 - Math.sin(MAP_LAT_BOTTOM_RAD))));\n  return {\n    mapRadius: mapRadius,\n    mapOffsetY: mapOffsetY\n  };\n};\n\nvar latLonToCoord = function latLonToCoord(latLon, origin, extent) {\n  var _mapValues = mapValues(extent),\n      mapRadius = _mapValues.mapRadius,\n      mapOffsetY = _mapValues.mapOffsetY;\n\n  var x = Math.round((latLon[1] - MAP_LON_LEFT) * extent[0] / MAP_LON_DELTA);\n  var latitudeRad = latLon[0] * Math.PI / 180;\n  var y = extent[1] + mapOffsetY - Math.round(mapRadius / 2 * Math.log((1 + Math.sin(latitudeRad)) / (1 - Math.sin(latitudeRad))));\n  return [x, y]; // the coordinate value of this point on the map image\n};\n\nvar coordToLatLon = function coordToLatLon(coord, origin, extent) {\n  var _mapValues2 = mapValues(extent),\n      mapRadius = _mapValues2.mapRadius,\n      mapOffsetY = _mapValues2.mapOffsetY;\n\n  var a = (extent[1] + mapOffsetY - coord[1]) / mapRadius;\n  var lat = 180 / Math.PI * (2 * Math.atan(Math.exp(a)) - Math.PI / 2);\n  var lon = coord[0] * MAP_LON_DELTA / extent[0] + MAP_LON_LEFT;\n  return [lat, lon];\n};\n\nvar buildContinent = function buildContinent(_ref) {\n  var area = _ref.area,\n      dots = _ref.dots,\n      name = _ref.name,\n      origin = _ref.origin;\n  var extent = [].concat(origin);\n  var stateDots = dots.map(function (segment) {\n    var count = segment[2];\n    var spots = [];\n\n    for (var i = 0; i < count; i += 1) {\n      spots.push('h0');\n    }\n\n    var dotCommands = spots.join(' m10,0 ');\n    var x = FACTOR * (origin[0] + segment[0] + 1);\n    var y = FACTOR * (origin[1] + segment[1] + 1);\n    extent = maxCoordinate(extent, [origin[0] + segment[0] + segment[2], origin[1] + segment[1]]);\n    return \"M\" + x + \",\" + y + \" \" + dotCommands;\n  }).join(' ');\n  var stateArea = area.map(function (point, index) {\n    var x = FACTOR * (point[0] + origin[0] + 1);\n    var y = FACTOR * (point[1] + origin[1] + 1);\n    return \"\" + (index === 0 ? 'M' : 'L') + x + \",\" + y;\n  }).join(' ') + \" Z\";\n  var mid = [origin[0] + (extent[0] - origin[0]) / 2, origin[1] + (extent[1] - origin[1]) / 2];\n  return {\n    area: stateArea,\n    dots: stateDots,\n    name: name,\n    origin: origin,\n    extent: extent,\n    mid: mid\n  };\n};\n\nvar buildWorld = function buildWorld() {\n  // Build the SVG paths describing the individual dots\n  var continents = CONTINENTS.map(buildContinent);\n  var origin = [0, 0];\n  var extent = [0, 0];\n  continents.forEach(function (continent) {\n    extent = maxCoordinate(extent, continent.extent);\n  });\n  return {\n    continents: continents,\n    extent: extent,\n    origin: origin,\n    x: origin[0] * FACTOR,\n    y: origin[1] * FACTOR,\n    width: (extent[0] - origin[0] + 1) * FACTOR,\n    height: (extent[1] - origin[1] + 2) * FACTOR\n  };\n};\n\nvar buildInteractiveProps = function buildInteractiveProps(_ref2, activeFunc, active) {\n  var name = _ref2.name,\n      onClick = _ref2.onClick,\n      onHover = _ref2.onHover;\n  return {\n    role: 'button',\n    'aria-label': name,\n    tabIndex: '0',\n    onClick: onClick ? function () {\n      return onClick(name);\n    } : undefined,\n    onMouseOver: function onMouseOver() {\n      if (!active) {\n        activeFunc(name);\n\n        if (onHover) {\n          onHover(true);\n        }\n      }\n    },\n    onMouseLeave: function onMouseLeave() {\n      if (active) {\n        activeFunc(undefined);\n\n        if (onHover) {\n          onHover(false);\n        }\n      }\n    },\n    onFocus: function onFocus() {\n      // This moves the map unnecessarily. Instead, we should check\n      // the position and scroll if it isn't already visible\n      // this._worldMapRef.scrollIntoView();\n      if (!active) {\n        activeFunc(name);\n      }\n    },\n    onBlur: function onBlur() {\n      if (active) {\n        activeFunc(undefined);\n      }\n    }\n  };\n};\n\nvar WorldMap = /*#__PURE__*/forwardRef(function (_ref3, ref) {\n  var fill = _ref3.fill,\n      color = _ref3.color,\n      continentsProp = _ref3.continents,\n      hoverColor = _ref3.hoverColor,\n      onSelectPlace = _ref3.onSelectPlace,\n      placesProp = _ref3.places,\n      rest = _objectWithoutPropertiesLoose(_ref3, [\"fill\", \"color\", \"continents\", \"hoverColor\", \"onSelectPlace\", \"places\"]);\n\n  var theme = React.useContext(ThemeContext);\n  var world = React.useMemo(buildWorld, []);\n\n  var _React$useState = React.useState({}),\n      continents = _React$useState[0],\n      setContinents = _React$useState[1];\n\n  React.useEffect(function () {\n    if (continentsProp) {\n      setContinents(continentsProp.reduce(function (obj, continent) {\n        // eslint-disable-next-line no-param-reassign\n        obj[continent.name] = continent;\n        return obj;\n      }, {}));\n    } else setContinents({});\n  }, [continentsProp]);\n\n  var _React$useState2 = React.useState([]),\n      places = _React$useState2[0],\n      setPlaces = _React$useState2[1];\n\n  React.useEffect(function () {\n    if (placesProp) {\n      setPlaces(placesProp.map(function (_ref4) {\n        var location = _ref4.location,\n            place = _objectWithoutPropertiesLoose(_ref4, [\"location\"]);\n\n        var coords = latLonToCoord(location, world.origin, world.extent);\n        return _extends({\n          coords: coords,\n          key: location.join(',')\n        }, place);\n      }));\n    } else setPlaces([]);\n  }, [placesProp, world]);\n\n  var _React$useState3 = React.useState(),\n      over = _React$useState3[0],\n      setOver = _React$useState3[1];\n\n  var _React$useState4 = React.useState(),\n      activeCoords = _React$useState4[0],\n      setActiveCoords = _React$useState4[1];\n\n  var _React$useState5 = React.useState(),\n      activeContinent = _React$useState5[0],\n      setActiveContinent = _React$useState5[1];\n\n  var _React$useState6 = React.useState(),\n      activePlace = _React$useState6[0],\n      setActivePlace = _React$useState6[1];\n\n  var containerRef = React.useRef();\n  var onMouseMove = React.useCallback(function (event) {\n    // determine the map coordinates for where the mouse is\n    // containerRef uses the group so we can handle aspect ratio scaling\n    var rect = containerRef.current.getBoundingClientRect(); // since the SVG viewBox might be scaled\n\n    var scale = rect.width / world.width;\n    var coords = [Math.round((event.clientX - rect.left) / scale / FACTOR), Math.round((event.clientY - rect.top) / scale / FACTOR)];\n    setActiveCoords(coords);\n  }, [world.width]);\n  var continentElements = world.continents.map(function (_ref5) {\n    var area = _ref5.area,\n        dots = _ref5.dots,\n        name = _ref5.name;\n\n    var _ref6 = continents[name] || {},\n        continentColor = _ref6.color,\n        onClick = _ref6.onClick,\n        onHover = _ref6.onHover;\n\n    var active = activeContinent && activeContinent === name;\n    var interactiveProps = {};\n\n    if (onClick || onHover) {\n      interactiveProps = buildInteractiveProps(continents[name], function (activate) {\n        return setActiveContinent(activate);\n      }, active);\n    }\n\n    return /*#__PURE__*/React.createElement(\"g\", _extends({\n      key: name\n    }, interactiveProps), /*#__PURE__*/React.createElement(\"path\", {\n      stroke: \"none\",\n      fill: \"#fff\",\n      fillOpacity: \"0.01\",\n      d: area\n    }), /*#__PURE__*/React.createElement(\"path\", {\n      d: dots,\n      strokeLinecap: \"round\",\n      strokeWidth: parseMetricToNum(theme.worldMap.continent[active ? 'active' : 'base']),\n      stroke: normalizeColor(continentColor || color || theme.worldMap.color, theme)\n    }));\n  });\n  var placeElements = places.map(function (place) {\n    var placeColor = place.color,\n        coords = place.coords,\n        key = place.key,\n        name = place.name,\n        onClick = place.onClick,\n        onHover = place.onHover,\n        restPlace = _objectWithoutPropertiesLoose(place, [\"color\", \"coords\", \"key\", \"name\", \"onClick\", \"onHover\"]);\n\n    var d = \"M\" + FACTOR * coords[0] + \", \" + FACTOR * coords[1] + \" h0\";\n    var active = activePlace && activePlace === name;\n    var interactiveProps = {};\n\n    if (onClick || onHover) {\n      interactiveProps = buildInteractiveProps(place, function (activate) {\n        return setActivePlace(activate);\n      }, active);\n    }\n\n    return /*#__PURE__*/React.createElement(\"path\", _extends({\n      key: key,\n      strokeLinecap: \"round\",\n      strokeWidth: parseMetricToNum(theme.worldMap.place[active ? 'active' : 'base']),\n      stroke: normalizeColor(placeColor || color || theme.worldMap.color, theme)\n    }, interactiveProps, restPlace, {\n      d: d\n    }));\n  }); // If the caller is interested in onSelectPlace changes, track where the\n\n  var interactiveProps = {};\n\n  if (onSelectPlace) {\n    interactiveProps = {\n      onMouseOver: function onMouseOver() {\n        return setOver(true);\n      },\n      onMouseMove: over ? onMouseMove : undefined,\n      onMouseLeave: function onMouseLeave() {\n        setOver(false);\n        setActiveCoords(undefined);\n      }\n    };\n  }\n\n  var active;\n\n  if (activeCoords) {\n    var d = \"M\" + FACTOR * activeCoords[0] + \", \" + FACTOR * activeCoords[1] + \" h0\";\n    active = /*#__PURE__*/React.createElement(\"g\", {\n      stroke: \"none\",\n      fill: \"none\",\n      fillRule: \"evenodd\",\n      onClick: function onClick() {\n        return onSelectPlace(coordToLatLon(activeCoords, world.origin, world.extent));\n      }\n    }, /*#__PURE__*/React.createElement(\"path\", {\n      strokeLinecap: \"round\",\n      strokeWidth: parseMetricToNum(theme.worldMap.place.active),\n      stroke: normalizeColor(hoverColor || color || theme.worldMap.hover.color, theme),\n      d: d\n    }));\n  }\n\n  return /*#__PURE__*/React.createElement(StyledWorldMap, _extends({\n    ref: ref,\n    viewBox: world.x + \" \" + world.y + \" \" + world.width + \" \" + world.height,\n    preserveAspectRatio: \"xMinYMin meet\",\n    fillProp: fill,\n    width: world.width,\n    height: world.height\n  }, interactiveProps, rest), /*#__PURE__*/React.createElement(\"g\", {\n    ref: containerRef,\n    stroke: \"none\",\n    fill: \"none\",\n    fillRule: \"evenodd\"\n  }, continentElements), placeElements, active); // }\n});\nWorldMap.displayName = 'WorldMap';\nWorldMap.defaultProps = {};\nObject.setPrototypeOf(WorldMap.defaultProps, defaultProps);\nvar WorldMapDoc;\n\nif (process.env.NODE_ENV !== 'production') {\n  // eslint-disable-next-line global-require\n  WorldMapDoc = require('./doc').doc(WorldMap);\n}\n\nvar WorldMapWrapper = WorldMapDoc || WorldMap;\nexport { WorldMapWrapper as WorldMap };"]},"metadata":{},"sourceType":"module"}